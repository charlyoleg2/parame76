import{a as ja,b as Ga}from"../chunks/BC_wPopp.js";import{H as Ka,a as Ra,g as Ba}from"../chunks/CHIP-de4.js";import"../chunks/DsnmJJEf.js";import{N as ta,aQ as ha,H as Zt,a6 as Ha,aR as Ta,j as Ja,aS as Qa,aT as $a,V as ts,D as es,n as Ua,a7 as qa,aU as as,aV as ss,af as k,G as r,aC as ls,ae as ce,aW as Ft,p as bt,ar as Re,a as Lt,b as C,c as _t,f as M,d as s,r as e,t as et,s as a,aq as Z,as as yt,e as w,au as wt,u as pa,aX as Pe,aY as Je,at as La,aZ as ga,a_ as Sa,a$ as rs}from"../chunks/B_L8QMBJ.js";import{s as V,e as Ct,o as at,q as ea,t as ns,u as cs,w as os,x as is,y as ka,P as Qe,z as Na,A as $e,B as re,C as us,D as vs,F as ds,G as fs,H as ma,I as ms,J as za,l as we,r as ba,K as rt,L as bs,M as Aa,N as _s,O as ys,Q as gs,R as hs}from"../chunks/CYBeyg6A.js";import{p as St,i as ne,b as aa}from"../chunks/B82hJb5h.js";import{b as sa}from"../chunks/G7pGq_dy.js";import{s as ps}from"../chunks/BcUYpzlG.js";import{p as Ca,i as ks}from"../chunks/DzW_d3-O.js";import{a as xs,o as Ds}from"../chunks/Bbk9uUlk.js";import"../chunks/DfkC6-Nm.js";function Ia(l){var t,c,n="";if(typeof l=="string"||typeof l=="number")n+=l;else if(typeof l=="object")if(Array.isArray(l)){var u=l.length;for(t=0;t<u;t++)l[t]&&(c=Ia(l[t]))&&(n&&(n+=" "),n+=c)}else for(c in l)l[c]&&(n&&(n+=" "),n+=c);return n}function ws(){for(var l,t,c=0,n="",u=arguments.length;c<u;c++)(l=arguments[c])&&(t=Ia(l))&&(n&&(n+=" "),n+=t);return n}function Oa(l){return typeof l=="object"?ws(l):l??""}const Pa=[...` 	
\r\fÂ \v\uFEFF`];function js(l,t,c){var n=l==null?"":""+l;if(t&&(n=n?n+" "+t:t),c){for(var u in c)if(c[u])n=n?n+" "+u:u;else if(n.length)for(var o=u.length,v=0;(v=n.indexOf(u,v))>=0;){var i=v+o;(v===0||Pa.includes(n[v-1]))&&(i===n.length||Pa.includes(n[i]))?n=(v===0?"":n.substring(0,v))+n.substring(i+1):v=i}}return n===""?null:n}function pt(l,t,c,n,u,o){var v=l.__className;if(ta||v!==c||v===void 0){var i=js(c,n,o);(!ta||i!==l.getAttribute("class"))&&(i==null?l.removeAttribute("class"):l.className=i),l.__className=c}else if(o&&u!==o)for(var d in o){var x=!!o[d];(u==null||x!==!!u[d])&&l.classList.toggle(d,x)}return o}function Xa(l,t,c=!1){if(l.multiple){if(t==null)return;if(!Ja(t))return Qa();for(var n of l.options)n.selected=t.includes(Me(n));return}for(n of l.options){var u=Me(n);if($a(u,t)){n.selected=!0;return}}(!c||t!==void 0)&&(l.selectedIndex=-1)}function Ls(l){var t=new MutationObserver(()=>{Xa(l,l.__value)});t.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ts(()=>{t.disconnect()})}function Fa(l,t,c=t){var n=new WeakSet,u=!0;ha(l,"change",o=>{var v=o?"[selected]":":checked",i;if(l.multiple)i=[].map.call(l.querySelectorAll(v),Me);else{var d=l.querySelector(v)??l.querySelector("option:not([disabled])");i=d&&Me(d)}c(i),Zt!==null&&n.add(Zt)}),Ha(()=>{var o=t();if(l===document.activeElement){var v=Ta??Zt;if(n.has(v))return}if(Xa(l,o,u),u&&o===void 0){var i=l.querySelector(":checked");i!==null&&(o=Me(i),c(o))}l.__value=o,u=!1}),Ls(l)}function Me(l){return"__value"in l?l.__value:l.value}function je(l,t,c=t){var n=new WeakSet;ha(l,"input",async u=>{var o=u?l.defaultValue:l.value;if(o=_a(l)?ya(o):o,c(o),Zt!==null&&n.add(Zt),await es(),o!==(o=t())){var v=l.selectionStart,i=l.selectionEnd,d=l.value.length;if(l.value=o??"",i!==null){var x=l.value.length;v===i&&i===d&&x>d?(l.selectionStart=x,l.selectionEnd=x):(l.selectionStart=v,l.selectionEnd=Math.min(i,x))}}}),(ta&&l.defaultValue!==l.value||Ua(t)==null&&l.value)&&(c(_a(l)?ya(l.value):l.value),Zt!==null&&n.add(Zt)),qa(()=>{var u=t();if(l===document.activeElement){var o=Ta??Zt;if(n.has(o))return}_a(l)&&u===ya(l.value)||l.type==="date"&&!u&&!l.value||u!==l.value&&(l.value=u??"")})}function jt(l,t,c=t){ha(l,"change",n=>{var u=n?l.defaultChecked:l.checked;c(u)}),(ta&&l.defaultChecked!==l.checked||Ua(t)==null)&&c(l.checked),qa(()=>{var n=t();l.checked=!!n})}function _a(l){var t=l.type;return t==="number"||t==="range"}function ya(l){return l===""?null:+l}function Ss(l,t){as(window,["resize"],()=>ss(()=>t(window[l])))}function Ns(l){var t=ls(0);return function(){return arguments.length===1?(k(t,r(t)+1),arguments[0]):(r(t),l())}}function zs(l,t){throw new Ka(l,t)}function As({params:l}){const t=l.design;if(Object.keys(ja).includes(t))return{pageDef:ja[t],allLink:Ga};zs(404,"Design undefined!")}const Il=Object.freeze(Object.defineProperty({__proto__:null,load:As},Symbol.toStringTag,{value:"Module"})),K=ce({});function Wa(l,t,c){if(Object.keys(K).includes(l)){const u=K[l],o=Object.keys(u);for(const v of Object.keys(t))o.includes(v)?c&&(u[v]=t[v]):u[v]=t[v];K[l]=u}else K[l]=t}function Cs(l){const t=l.pDef.partName,c={};for(const n of l.pDef.params)c[n.name]=n.init;Wa(t,c,!1)}var Os=M('<aside class="backdrop svelte-1qqjtat"><div class="dialog svelte-1qqjtat"><button class="svelte-1qqjtat"><img/></button></div></aside>');function Ya(l,t){bt(t,!0);let c=St(t,"modalOpen",15);function n(){c(!1)}var u=Re(),o=Lt(u);{var v=i=>{var d=Os(),x=s(d),m=s(x);m.__click=n;var j=s(m);e(m),e(x),e(d),et(()=>{V(j,"src",t.svgPath),V(j,"alt",t.svgPath)}),C(i,d)};ne(o,i=>{c()&&i(v)})}C(l,u),_t()}Ft(["click"]);var Ps=M('<button class="svelte-j14xk7"><img class="svelte-j14xk7"/></button>'),Fs=M('<section class="svelte-j14xk7"><!> <!></section>');function Ms(l,t){bt(t,!0);function c(m){const j=[];for(const z of Object.values(m.paramSvg))j.includes(z)||j.push(z);return j}let n=Z(!1),u=Z(""),o=yt(()=>c(t.pDef).map(m=>`${sa}/pgdsvg/${m}`));function v(m){k(u,m,!0),k(n,!0)}var i=Fs(),d=s(i);Ya(d,{get svgPath(){return r(u)},get modalOpen(){return r(n)},set modalOpen(m){k(n,m,!0)}});var x=a(d,2);Ct(x,16,()=>r(o),m=>m,(m,j)=>{var z=Ps();z.__click=()=>v(j);var h=s(z);e(z),et(()=>{V(h,"src",j),V(h,"alt",j)}),C(m,z)}),e(i),C(l,i),_t()}Ft(["click"]);var Rs=M('<aside class="backdrop svelte-i17c2v"><div><article class="question svelte-i17c2v"><!></article> <footer class="svelte-i17c2v"><button class="cancel svelte-i17c2v">Cancel</button> <button class="ok svelte-i17c2v"> </button></footer></div></aside>');function Fe(l,t){bt(t,!0);let c=St(t,"okName",3,"Ok"),n=St(t,"modalOpen",15),u=St(t,"sizeLarge",3,!1);function o(){n(!1)}function v(){t.okFunc(),n(!1)}var i=Re(),d=Lt(i);{var x=m=>{var j=Rs(),z=s(j);let h;var f=s(z),T=s(f);ps(T,()=>t.children),e(f);var R=a(f,2),J=s(R);J.__click=o;var A=a(J,2);A.__click=v;var B=s(A,!0);e(A),e(R),e(z),e(j),et(()=>{h=pt(z,1,"dialog svelte-i17c2v",null,h,{sizeLarge:u()}),w(B,c())}),C(m,j)};ne(d,m=>{n()&&m(x)})}C(l,i),_t()}Ft(["click"]);var Ts=M('<p class="diagItem svelte-19mawtt"> </p>'),Us=M('<p class="diagTitle svelte-19mawtt">Do you really want to delete the following localStorage keys?</p> <!>',1),qs=M('<tr class="svelte-19mawtt"><td><input type="checkbox"/></td><td class="svelte-19mawtt"><button class="svelte-19mawtt"> </button></td><td> </td></tr>'),Is=M('<div class="deleteKeys svelte-19mawtt"><button class="svelte-19mawtt">Delete</button> <!> <table class="svelte-19mawtt"><thead class="svelte-19mawtt"><tr><td>Delete</td><td>Key name</td><td>Last modification</td></tr><tr><td><input type="checkbox"/></td><td class="instruction">delete all</td><td></td></tr></thead><tbody class="svelte-19mawtt"></tbody></table></div>');function Va(l,t){bt(t,!0);let c=St(t,"storeName",15),n=St(t,"localKeys",15),u=Z(ce({})),o=Z(!1),v=Z(!1);function i(){let b=[];const U=new RegExp(`^${t.pageName}_`);return b=Object.keys(window.localStorage).filter(Y=>U.test(Y)).map(Y=>Y.replace(U,"")),b.sort(),b}n(i());function d(b){c(b)}function x(b){let U={};for(const E of b){let Y="";const Q=`${t.pageName}_${E}`,H=window.localStorage.getItem(Q);H!==null&&(Y=JSON.parse(H).lastModif),U[E]=Y}return U}let m=yt(()=>x(n()));function j(b){let U={};for(const E of b)U[E]=!1;return U}k(u,j(n()),!0);function z(){for(const b of n())r(u)[b]=r(o)}function h(){for(const b of n())if(r(u)[b]){const U=`${t.pageName}_${b}`;window.localStorage.removeItem(U)}k(o,!1),n(i())}var f=Is(),T=s(f);T.__click=()=>{k(v,!0)};var R=a(T,2);Fe(R,{okName:"Confirm",okFunc:h,get modalOpen(){return r(v)},set modalOpen(b){k(v,b,!0)},children:(b,U)=>{var E=Us(),Y=a(Lt(E),2);Ct(Y,16,n,Q=>Q,(Q,H)=>{var st=Re(),it=Lt(st);{var G=vt=>{var ut=Ts(),ft=s(ut,!0);e(ut),et(()=>w(ft,H)),C(vt,ut)};ne(it,vt=>{r(u)[H]&&vt(G)})}C(Q,st)}),C(b,E)},$$slots:{default:!0}});var J=a(R,2),A=s(J),B=a(s(A)),nt=s(B),ct=s(nt);at(ct),ct.__change=z,e(nt),wt(2),e(B),e(A);var ot=a(A);Ct(ot,20,n,b=>b,(b,U)=>{var E=qs(),Y=s(E),Q=s(Y);at(Q),e(Y);var H=a(Y),st=s(H);st.__click=()=>d(U);var it=s(st,!0);e(st),e(H);var G=a(H),vt=s(G,!0);e(G),e(E),et(()=>{w(it,U),w(vt,r(m)[U])}),jt(Q,()=>r(u)[U],ut=>r(u)[U]=ut),C(b,E)}),e(ot),e(J),e(f),jt(ct,()=>r(o),b=>k(o,b)),C(l,f),_t()}Ft(["click","change"]);var Xs=M('<p class="warnMsg svelte-1dviuxk"> </p>'),Ws=M('<!> <div class="svelte-1dviuxk"><label for="storName" class="svelte-1dviuxk">Give a name to your parameter-set:</label> <input type="text" id="storName" required minlength="4" maxlength="30" size="32" class="svelte-1dviuxk"/> <!></div>',1);function Ys(l,t){bt(t,!0);let c=St(t,"storeName",15),n=Z(ce([]));function u(z){const h=/[-:]/g,f=/\..*$/,T=new Date().toISOString().replace(h,"").replace(f,"").replace("T","_");return`${z}_${T}`}c(u(t.pageName));let o=yt(()=>r(n).includes(c()));var v=Ws(),i=Lt(v);Va(i,{get pageName(){return t.pageName},get storeName(){return c()},set storeName(z){c(z)},get localKeys(){return r(n)},set localKeys(z){k(n,z,!0)}});var d=a(i,2),x=a(s(d),2);at(x);var m=a(x,2);{var j=z=>{var h=Xs(),f=s(h);e(h),et(()=>w(f,`Warning: name ${c()??""} already used`)),C(z,h)};ne(m,z=>{r(o)&&z(j)})}e(d),je(x,c),C(l,v),_t()}var Vs=M('<!> <div class="svelte-116vgu9"><label for="storName" class="svelte-116vgu9">Select a parameter-set:</label> <input type="text" id="storName" readonly="" minlength="4" maxlength="30" size="32" class="svelte-116vgu9"/></div>',1);function Es(l,t){bt(t,!0);let c=St(t,"storeName",15),n=Z(ce([]));function u(x){let m=c();return!x.includes(m)&&(x.length>0?m=x[0]:m=""),m}pa(()=>{c(u(r(n)))});var o=Vs(),v=Lt(o);Va(v,{get pageName(){return t.pageName},get storeName(){return c()},set storeName(x){c(x)},get localKeys(){return r(n)},set localKeys(x){k(n,x,!0)}});var i=a(v,2),d=a(s(i),2);at(d),e(i),et(()=>ea(d,c())),C(l,o),_t()}const D=ce({dLayers:cs(),zAdjust:ns(),canvasZWidth:0});var Zs=M('<canvas class="mini svelte-1lfrqpx"></canvas>');function Ma(l,t){bt(t,!0);const c=200,n=.6;let u;function o(d,x,m,j){const z=os(j);z.ruler=!1;let h;if(u){const f=u.getContext("2d");f.clearRect(0,0,f.canvas.width,f.canvas.height);const T=f.canvas.width;try{t.full?h=d.getAdjustFull(f.canvas.width,f.canvas.height):h=is(m,T,x),d.draw(f,h,z)}catch(R){console.log(R)}}}pa(()=>{o(t.pFig,D.zAdjust,D.canvasZWidth,D.dLayers)});function v(d){const x=d.offsetX,m=d.offsetY,j=u.getContext("2d"),z=j.canvas.width/2,h=j.canvas.height/2;if(d.button===0){let f=1;x>z&&(f+=1*n),m>h&&(f+=2*n),j.canvas.width=f*c,j.canvas.height=f*c,o(t.pFig,D.zAdjust,D.canvasZWidth,D.dLayers)}}var i=Zs();V(i,"width",c),V(i,"height",c),i.__click=v,aa(i,d=>u=d,()=>u),C(l,i),_t()}Ft(["click"]);function Gs(l,t){const c=document.createElement("a");c.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),c.setAttribute("download",l),c.click(),c.remove()}function Ks(l,t,c){const n=/[-:]/g,u=/\..*$/,o=new Date().toISOString().replace(n,"").replace(u,"").replace("T","_");return ka(o,l,t,c)}function xa(l,t,c){const n=/[-:]/g,u=/\..*$/,o=new Date().toISOString().replace(n,"").replace(u,"").replace("T","_"),v=`px_${l}_${o}.json`,i=ka(o,l,t,c);Gs(v,i)}function Bs(l,t,c){const n=new URL(l),u=2e3;let o=n.toString().length;for(const v of Object.keys(t)){const i=t[v].toString(),d=2+v.length+i.length;n.searchParams.append(encodeURIComponent(v),encodeURIComponent(i)),o+=d}return o>=u&&console.log(`warn547: generateUrl: strLength ${o} larger than strLengthLimit ${u}`),n.toString()}const Hs=Symbol();class Js extends URLSearchParams{#t=Z(0);#s=$s();#e=!1;#a(){if(!this.#s||this.#e)return;this.#e=!0;const t=this.toString();this.#s.search=t&&`?${t}`,this.#e=!1}[Hs](t){if(!this.#e){this.#e=!0;for(const c of[...super.keys()])super.delete(c);for(const[c,n]of t)super.append(c,n);Pe(this.#t),this.#e=!1}}append(t,c){super.append(t,c),this.#a(),Pe(this.#t)}delete(t,c){var n=super.has(t,c);super.delete(t,c),n&&(this.#a(),Pe(this.#t))}get(t){return r(this.#t),super.get(t)}getAll(t){return r(this.#t),super.getAll(t)}has(t,c){return r(this.#t),super.has(t,c)}keys(){return r(this.#t),super.keys()}set(t,c){var n=super.getAll(t).join("");super.set(t,c),n!==super.getAll(t).join("")&&(this.#a(),Pe(this.#t))}sort(){super.sort(),this.#a(),Pe(this.#t)}toString(){return r(this.#t),super.toString()}values(){return r(this.#t),super.values()}entries(){return r(this.#t),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return r(this.#t),super.size}}let Qs=null;function $s(){return Qs}var tl=M('<input type="number" class="input-number svelte-1faty33"/> <input type="range" class="svelte-1faty33"/>',1),el=M("<option> </option>"),al=M("<select></select>"),sl=M("<option> </option>"),ll=M("<select></select>"),rl=M('<tr><td class="svelte-1faty33"> </td><td class="svelte-1faty33"><button class="svelte-1faty33"> </button></td><td class="svelte-1faty33"><!></td><td> </td><td> </td><td class="svelte-1faty33"> </td><td class="svelte-1faty33"> </td><td> </td></tr>'),nl=M('<tbody class="svelte-1faty33"><tr class="separator svelte-1faty33"><td class="svelte-1faty33"> </td><td class="svelte-1faty33"> </td><td class="svelte-1faty33"><label class="svelte-1faty33"><input type="checkbox" class="svelte-1faty33"/> <span class="svelte-1faty33"></span></label></td></tr></tbody> <tbody></tbody>',1),cl=M('<p>Copy this URL and send it to your friends!</p> <p class="cUrl svelte-1faty33"> </p>',1),ol=M('<section class="svelte-1faty33"><h2 class="svelte-1faty33">Parameters</h2> <main class="svelte-1faty33"><label for="loadFParams" class="fileUpload svelte-1faty33">Load Params from File</label> <input id="loadFParams" type="file" accept="text/plain, application/json" class="svelte-1faty33"/> <button class="svelte-1faty33">Set Params Default</button> <button class="svelte-1faty33">Load Params from localStorage</button> <!> <!> <textarea rows="3" cols="80" readonly="" wrap="soft"></textarea> <table class="svelte-1faty33"><thead class="svelte-1faty33"><tr class="svelte-1faty33"><td class="svelte-1faty33">&#35;</td><td class="svelte-1faty33">Parameter name</td><td class="svelte-1faty33">Value<span class="svelte-1faty33"><button class="svelte-1faty33">&minus;</button><button class="svelte-1faty33">+</button></span></td><td>Unit</td><td>Default</td><td class="svelte-1faty33">Min</td><td class="svelte-1faty33">Max</td><td>Step</td></tr></thead><!></table> <div class="comment svelte-1faty33"><label for="inComment">Comment:</label> <input type="text" id="inComment" maxlength="150"/></div> <button class="svelte-1faty33">Save Parameters to File</button> <button class="svelte-1faty33">Save Parameters as URL</button> <button class="svelte-1faty33">Save Parameters to localStorage</button> <!> <!></main> <!> <button class="side-img svelte-1faty33"><img class="svelte-1faty33"/></button> <div class="mini-canvas svelte-1faty33"><!></div> <div class="mini-canvas svelte-1faty33"><!></div></section>');function il(l,t){bt(t,!0);let c=Z(""),n=Z(!1),u=Z(""),o=Z(!1),v=Z(!1),i=Z(!1),d=Z(!1),x=Z(!1),m=Z(""),j=Z(""),z=Z(""),h=Z(ce(st(t.pDef.params[0].name))),f=Z(!1),T=Z(ce(ut(vt(t.pDef.params))));Ra(()=>{k(h,st(t.pDef.params[0].name),!0),k(T,ut(vt(t.pDef.params)),!0)});function R(y,p){let S="",q=!1;y!==t.pDef.partName&&(S+=`warn361: read partName: '${y}'  expected partName: '${t.pDef.partName}'
`,q=!0);let $=0,lt=0,Tt=0;const Wt=[];for(const gt of t.pDef.params)Wt.push(gt.name),Object.hasOwn(p,gt.name)?($+=1,K[t.pDef.partName][gt.name]===p[gt.name]?Tt+=1:K[t.pDef.partName][gt.name]=p[gt.name]):lt+=1;let Pt=0;for(const gt of Object.keys(p))Wt.includes(gt)||(Pt+=1,S+=`warn363: parameter ${gt} not in the scope of the design (${Pt})
`);const Ht=Pt>0,Jt=new Date().toLocaleTimeString();return S+=`Params loaded at ${Jt} :`,S+=` def-nb: ${Object.keys(t.pDef.params).length}`,S+=`, cover-nb: ${$}, uncover-nb: ${lt}
`,S+=` load-nb: ${Object.keys(p).length}`,S+=`, equal-nb: ${Tt}, changed-nb: ${$-Tt}`,S+=`, out-of-scope: ${Pt}`,[S,q||Ht]}async function J(y){try{const p=await fetch(y);if(!p.ok)throw`err627: error while fetching ${y}`;const S=await p.text(),[q]=Na(S);($=>{var lt=Je($,2);k(u,lt[0],!0),k(o,lt[1],!0)})(R(q.partName,q.pVal)),k(c,q.comment,!0)}catch(p){let S=`err223: error by fetching px file
`;S+=p,k(u,S,!0),k(o,!0)}}async function A(){{const y=new Js(Ca.url.search),p="pxUrl";if(y.has(p)){const q=y.get(p);y.delete(p),q?await J(q):(k(u,`err123: error by parsing URL-search-params
`),k(o,!0))}const S={};for(const[q,$]of y){const lt=Number($);isNaN(lt)||(S[q]=lt)}Object.keys(S).length>0&&(q=>{var $=Je(q,2);k(u,$[0],!0),k(o,$[1],!0)})(R(t.pDef.partName,S))}}A();function B(y){try{const[p]=Na(y);(S=>{var q=Je(S,2);k(u,q[0],!0),k(o,q[1],!0)})(R(p.partName,p.pVal)),k(c,p.comment,!0)}catch(p){let S=`err723: error by parsing parameter file
`;S+=p,k(u,S,!0),k(o,!0)}}async function nt(y){const p=await y.text();B(p)}function ct(y){if(y.target){const p=y.target.files;p&&nt(p[0])}}function ot(){xa(t.pDef.partName,K[t.pDef.partName],r(c))}function b(){const y={};for(const p of t.pDef.params)y[p.name]=p.init;(p=>{var S=Je(p,2);k(u,S[0],!0),k(o,S[1],!0)})(R(t.pDef.partName,y))}function U(){if(r(m)!==void 0&&r(m)!==""){const y=`${t.pDef.partName}_${r(m)}`;{const p=window.localStorage.getItem(y);p===null?(k(u,`Warn157: localStorage key ${y} is null`),k(o,!0)):B(p)}}else k(u,"Warn239: No valid name for loading from localStorage!"),k(o,!0)}function E(){if(r(j)!==void 0&&r(j)!==""){const y=`${t.pDef.partName}_${r(j)}`,p=/\..*$/,S=new Date().toISOString().replace(p,""),q=ka(S,t.pDef.partName,K[t.pDef.partName],r(c));window.localStorage.setItem(y,q)}else console.log("Warn639: No valid name for writing to localStorage!")}function Y(){return Bs(Ca.url.href,K[t.pDef.partName]).toString()}function Q(){k(z,Y(),!0),k(d,!0)}function H(){}function st(y){let p=`${sa}/pgdsvg/default_param_blank.svg`;return Object.keys(t.pDef.paramSvg).includes(y)&&(p=`${sa}/pgdsvg/${t.pDef.paramSvg[y]}`),p}function it(y){k(h,st(y),!0)}function G(){k(f,!0)}function vt(y){const p=[];let q={sectionName:"main",sectionID:"g0main",sectionVisCollapse:!1,params:[]},$=0;for(const lt of y)lt.pType===Qe.eSectionSeparator?(p.push(q),$+=1,q={sectionName:lt.name,sectionID:`g${$}${lt.name}`,sectionVisCollapse:!0,params:[]}):q.params.push(lt);return p.push(q),p}function ut(y){const p={};for(const S of y)p[S.sectionID]=S.sectionVisCollapse;return p}let ft=yt(()=>vt(t.pDef.params));function Mt(){k(n,!0)}function _(){k(n,!1)}let L=yt(()=>r(n)?2:4),O=yt(()=>r(n)?2:3),W=yt(()=>r(n)?50:70);var kt=ol(),xt=a(s(kt),2),Ut=a(s(xt),2);Ut.__change=ct;var qt=a(Ut,2);qt.__click=()=>{k(v,!0)};var It=a(qt,2);It.__click=()=>{k(i,!0)};var Rt=a(It,2);Fe(Rt,{okName:"Overwrite Parameters",okFunc:b,get modalOpen(){return r(v)},set modalOpen(y){k(v,y,!0)},children:(y,p)=>{wt();var S=La("Load the default parameters ?");C(y,S)},$$slots:{default:!0}});var Ot=a(Rt,2);Fe(Ot,{okName:"Load Parameters",okFunc:U,get modalOpen(){return r(i)},set modalOpen(y){k(i,y,!0)},children:(y,p)=>{Es(y,{get pageName(){return t.pDef.partName},get storeName(){return r(m)},set storeName(S){k(m,S,!0)}})},$$slots:{default:!0}});var Xt=a(Ot,2);ga(Xt);let oe;var Le=a(Xt,2),ie=s(Le),Te=s(ie),ue=a(s(Te),2),ve=a(s(ue)),de=s(ve);de.__click=Mt;var la=a(de);la.__click=_,e(ve),e(ue);var fe=a(ue);let Ue;var me=a(fe);let qe;var Ie=a(me,3);let Xe;e(Te),e(ie);var We=a(ie);Ct(We,19,()=>r(ft),y=>y.sectionName,(y,p,S)=>{var q=nl(),$=Lt(q),lt=s($),Tt=s(lt),Wt=s(Tt,!0);e(Tt);var Pt=a(Tt),Ht=s(Pt,!0);e(Pt);var Jt=a(Pt),pe=s(Jt),gt=s(pe);at(gt),wt(2),e(pe),e(Jt),e(lt),e($);var Qt=a($,2);let ke;Ct(Qt,23,()=>r(p).params,$t=>$t.name,($t,I,oa)=>{var Yt=rl();let Ee;var xe=s(Yt),ia=s(xe);e(xe);var te=a(xe),ee=s(te);ee.__click=()=>it(r(I).name);var ua=s(ee,!0);e(ee),e(te);var ae=a(te),va=s(ae);{var Ne=g=>{var F=tl(),P=Lt(F);at(P);var N=a(P,2);at(N),et(()=>{V(P,"min",r(I).min),V(P,"max",r(I).max),V(P,"step",r(I).step),V(N,"min",r(I).min),V(N,"max",r(I).max),V(N,"step",r(I).step)}),je(P,()=>K[t.pDef.partName][r(I).name],tt=>K[t.pDef.partName][r(I).name]=tt),je(N,()=>K[t.pDef.partName][r(I).name],tt=>K[t.pDef.partName][r(I).name]=tt),C(g,F)},da=g=>{var F=Re(),P=Lt(F);{var N=Nt=>{var mt=al();Ct(mt,22,()=>["Off","On"],Dt=>Dt,(Dt,ht,zt)=>{var dt=el(),At=s(dt,!0);e(dt);var Et={};et(()=>{w(At,ht),Et!==(Et=r(zt))&&(dt.value=(dt.__value=r(zt))??"")}),C(Dt,dt)}),e(mt),Fa(mt,()=>K[t.pDef.partName][r(I).name],Dt=>K[t.pDef.partName][r(I).name]=Dt),C(Nt,mt)},tt=Nt=>{var mt=Re(),Dt=Lt(mt);{var ht=dt=>{var At=ll();Ct(At,22,()=>r(I).dropdown,Et=>Et,(Et,Ea,Da)=>{var Oe=sl(),Za=s(Oe,!0);e(Oe);var wa={};et(()=>{w(Za,Ea),wa!==(wa=r(Da))&&(Oe.value=(Oe.__value=r(Da))??"")}),C(Et,Oe)}),e(At),Fa(At,()=>K[t.pDef.partName][r(I).name],Et=>K[t.pDef.partName][r(I).name]=Et),C(dt,At)},zt=dt=>{var At=La("unknown");C(dt,At)};ne(Dt,dt=>{r(I).pType===Qe.eDropdown?dt(ht):dt(zt,!1)},!0)}C(Nt,mt)};ne(P,Nt=>{r(I).pType===Qe.eCheckbox?Nt(N):Nt(tt,!1)},!0)}C(g,F)};ne(va,g=>{r(I).pType===Qe.eNumber?g(Ne):g(da,!1)})}e(ae);var se=a(ae);let Ze;var Ge=s(se,!0);e(se);var Vt=a(se);let Ke;var ze=s(Vt,!0);e(Vt);var Ae=a(Vt),Be=s(Ae,!0);e(Ae);var Ce=a(Ae),De=s(Ce,!0);e(Ce);var le=a(Ce);let He;var fa=s(le,!0);e(le),e(Yt),et(()=>{Ee=pt(Yt,1,"svelte-1faty33",null,Ee,{changed:K[t.pDef.partName][r(I).name]!==r(I).init}),w(ia,`${r(S)+1}.${r(oa)+1}`),w(ua,r(I).name),Ze=pt(se,1,"svelte-1faty33",null,Ze,{hideColumn:r(n)}),w(Ge,r(I).unit),Ke=pt(Vt,1,"svelte-1faty33",null,Ke,{hideColumn:r(n)}),w(ze,r(I).init),w(Be,r(I).min),w(De,r(I).max),He=pt(le,1,"svelte-1faty33",null,He,{hideColumn:r(n)}),w(fa,r(I).step)}),C($t,Yt)}),e(Qt),et(()=>{w(Wt,r(S)+1),V(Pt,"colspan",r(L)),w(Ht,r(p).sectionName),V(Jt,"colspan",r(O)),ke=pt(Qt,1,"svelte-1faty33",null,ke,{collaps:r(T)[r(p).sectionID]})}),jt(gt,()=>r(T)[r(p).sectionID],$t=>r(T)[r(p).sectionID]=$t),C(y,q)}),e(Le);var Gt=a(Le,2),Kt=a(s(Gt),2);at(Kt),e(Gt);var Ye=a(Gt,2);Ye.__click=ot;var be=a(Ye,2);be.__click=Q;var Ve=a(be,2);Ve.__click=()=>{k(x,!0)};var _e=a(Ve,2);Fe(_e,{okName:"Done",okFunc:H,sizeLarge:!0,get modalOpen(){return r(d)},set modalOpen(y){k(d,y,!0)},children:(y,p)=>{var S=cl(),q=a(Lt(S),2),$=s(q,!0);e(q),et(()=>w($,r(z))),C(y,S)},$$slots:{default:!0}});var ra=a(_e,2);Fe(ra,{okName:"Save into localStorage",okFunc:E,get modalOpen(){return r(x)},set modalOpen(y){k(x,y,!0)},children:(y,p)=>{Ys(y,{get pageName(){return t.pDef.partName},get storeName(){return r(j)},set storeName(S){k(j,S,!0)}})},$$slots:{default:!0}}),e(xt);var Se=a(xt,2);Ya(Se,{get svgPath(){return r(h)},get modalOpen(){return r(f)},set modalOpen(y){k(f,y,!0)}});var ye=a(Se,2);ye.__click=G;var ge=s(ye);e(ye);var Bt=a(ye,2),na=s(Bt);Ma(na,{get pFig(){return t.pFig},full:!0}),e(Bt);var he=a(Bt,2),ca=s(he);Ma(ca,{get pFig(){return t.pFig},full:!1}),e(he),e(kt),et(()=>{ea(Xt,r(u)),oe=pt(Xt,1,"svelte-1faty33",null,oe,{colorWarn:r(o)}),Ue=pt(fe,1,"svelte-1faty33",null,Ue,{hideColumn:r(n)}),qe=pt(me,1,"svelte-1faty33",null,qe,{hideColumn:r(n)}),Xe=pt(Ie,1,"svelte-1faty33",null,Xe,{hideColumn:r(n)}),V(Kt,"size",r(W)),V(ge,"src",r(h)),V(ge,"alt",r(h))}),je(Kt,()=>r(c),y=>k(c,y)),C(l,kt),_t()}Ft(["change","click"]);var ul=M('<nav class="svelte-h4jojj"><button class="svelte-h4jojj">0</button> <button class="svelte-h4jojj">&lt-</button> <button class="svelte-h4jojj">|&lt</button> <button class="svelte-h4jojj">||</button> <button class="svelte-h4jojj">&gt|</button> <button class="svelte-h4jojj">-&gt</button> <input type="range" min="0" class="svelte-h4jojj"/> <input type="number" min="0" class="svelte-h4jojj"/></nav>');function vl(l,t){bt(t,!0);let c=St(t,"tMax",3,10),n=St(t,"tStep",3,.1),u=St(t,"tUpdate",3,500),o=St(t,"simTime",15,0),v=null,i=0,d;const x=4;function m(){v!==null&&(clearInterval(v),v=null)}function j(){d<0&&o()<=0?o(c()):d>0&&o()>=c()?o(0):o(o()+d)}function z(){const H=u()/2**(Math.abs(i)-1);d=i<0?-n():n(),v=setInterval(j,H)}function h(){m(),o(0),i=0}function f(){m(),i=0,d=-n(),j()}function T(){m(),i=0,d=n(),j()}function R(){m(),i=Math.max(i-1,-x),z()}function J(){m(),i=Math.min(i+1,x),z()}function A(){m(),i=0}xs(()=>{m()});var B=ul(),nt=s(B);nt.__click=h;var ct=a(nt,2);ct.__click=R;var ot=a(ct,2);ot.__click=f;var b=a(ot,2);b.__click=A;var U=a(b,2);U.__click=T;var E=a(U,2);E.__click=J;var Y=a(E,2);at(Y);var Q=a(Y,2);at(Q),e(B),et(()=>{V(Y,"max",c()),V(Y,"step",n()),V(Q,"max",c()),V(Q,"step",n())}),je(Y,o),je(Q,o),C(l,B),_t()}Ft(["click"]);var dl=M('<nav class="svelte-s6zpbt"><button aria-labelledby="zoomInit" class="svelte-s6zpbt"><div class="zero svelte-s6zpbt"></div></button><button aria-labelledby="zoomIn" class="svelte-s6zpbt"><div class="zoomin svelte-s6zpbt"></div></button><button aria-labelledby="zoomOut" class="svelte-s6zpbt"><div class="zoomout svelte-s6zpbt"></div></button><button aria-labelledby="moveLeft" class="svelte-s6zpbt"><div class="arrowleft svelte-s6zpbt"></div></button><button aria-labelledby="moveRight" class="svelte-s6zpbt"><div class="arrowright svelte-s6zpbt"></div></button><button aria-labelledby="moveUp" class="svelte-s6zpbt"><div class="arrowup svelte-s6zpbt"></div></button><button aria-labelledby="moveDown" class="svelte-s6zpbt"><div class="arrowdown svelte-s6zpbt"></div></button></nav>');function fl(l,t){bt(t,!0);var c=dl(),n=s(c);n.__click=()=>t.zoomClick("zoomInit");var u=a(n);u.__click=()=>t.zoomClick("zoomIn");var o=a(u);o.__click=()=>t.zoomClick("zoomOut");var v=a(o);v.__click=()=>t.zoomClick("moveLeft");var i=a(v);i.__click=()=>t.zoomClick("moveRight");var d=a(i);d.__click=()=>t.zoomClick("moveUp");var x=a(d);x.__click=()=>t.zoomClick("moveDown"),e(c),C(l,c),_t()}Ft(["click"]);var X=Ns(()=>D),ml=M('<div class="svelte-1ehy91m"><label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>main part</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>main skeleton</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>second parts</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>second skeletons</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>dynamics</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>ruler</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>frame of reference</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>points</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>lines</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>vectors</label></div>');function bl(l,t){bt(t,!1),ks();var c=ml(),n=s(c),u=s(n);at(u),wt(),e(n);var o=a(n,2),v=s(o);at(v),wt(),e(o);var i=a(o,2),d=s(i);at(d),wt(),e(i);var x=a(i,2),m=s(x);at(m),wt(),e(x);var j=a(x,2),z=s(j);at(z),wt(),e(j);var h=a(j,2),f=s(h);at(f),wt(),e(h);var T=a(h,2),R=s(T);at(R),wt(),e(T);var J=a(T,2),A=s(J);at(A),wt(),e(J);var B=a(J,2),nt=s(B);at(nt),wt(),e(B);var ct=a(B,2),ot=s(ct);at(ot),wt(),e(ct),e(c),jt(u,()=>X().dLayers.main,b=>X(X().dLayers.main=b)),jt(v,()=>X().dLayers.mainB,b=>X(X().dLayers.mainB=b)),jt(d,()=>X().dLayers.second,b=>X(X().dLayers.second=b)),jt(m,()=>X().dLayers.secondB,b=>X(X().dLayers.secondB=b)),jt(z,()=>X().dLayers.dynamics,b=>X(X().dLayers.dynamics=b)),jt(f,()=>X().dLayers.ruler,b=>X(X().dLayers.ruler=b)),jt(R,()=>X().dLayers.refframe,b=>X(X().dLayers.refframe=b)),jt(A,()=>X().dLayers.points,b=>X(X().dLayers.points=b)),jt(nt,()=>X().dLayers.lines,b=>X(X().dLayers.lines=b)),jt(ot,()=>X().dLayers.vectors,b=>X(X().dLayers.vectors=b)),C(l,c),_t()}var _l=M('<section class="svelte-k59scj"><!> <div class="rack svelte-k59scj"><canvas class="full svelte-k59scj"></canvas> <!></div> <div class="rack svelte-k59scj"><canvas class="zoom svelte-k59scj"></canvas> <!></div></section>');function yl(l,t){bt(t,!0);let c=St(t,"simTime",15,0);const n=400,u=1200;let o=Z(n),v,i,d;function x(_,L){if(v){const O=v.getContext("2d");O.clearRect(0,0,O.canvas.width,O.canvas.height);try{d=_.getAdjustFull(O.canvas.width,O.canvas.height),_.draw(O,d,L)}catch(W){console.log(W)}}}function m(_,L,O){if(i){const W=i.getContext("2d");W.clearRect(0,0,W.canvas.width,W.canvas.height);try{(L===void 0||L.init===0)&&(L=_.getAdjustZoom(W.canvas.width,W.canvas.height)),_.draw(W,L,O)}catch(kt){console.log(kt)}}}function j(){const _=v.getContext("2d"),L=i.getContext("2d"),O=Math.min(Math.max(.4*r(o),n),u);_.canvas.width=O,_.canvas.height=O,L.canvas.width=O,L.canvas.height=O,D.canvasZWidth=O,D.zAdjust.init===0&&(D.zAdjust=t.pFig.getAdjustZoom(L.canvas.width,L.canvas.height))}function z(){j(),x(t.pFig,D.dLayers),m(t.pFig,D.zAdjust,D.dLayers)}function h(_,L,O){x(_,O),m(_,L,O)}Ds(()=>{j()}),pa(()=>{h(t.pFig,D.zAdjust,D.dLayers)});function f(_){const L=i.getContext("2d");switch(_){case"zoomInit":D.zAdjust=t.pFig.getAdjustZoom(L.canvas.width,L.canvas.height);break;case"zoomIn":D.zAdjust=$e(.7,D.zAdjust);break;case"zoomOut":D.zAdjust=$e(1.3,D.zAdjust);break;case"moveLeft":D.zAdjust.xMin+=-.2*D.zAdjust.xyDiff;break;case"moveRight":D.zAdjust.xMin+=.2*D.zAdjust.xyDiff;break;case"moveUp":D.zAdjust.yMin+=.2*D.zAdjust.xyDiff;break;case"moveDown":D.zAdjust.yMin+=-.2*D.zAdjust.xyDiff;break;default:console.log(`ERR423: ${_} has no case!`)}m(t.pFig,D.zAdjust,D.dLayers)}const T=3e3,R=10,J=3;let A={timestamp:0,offsetX:0,offsetY:0};function B(_){_.button===0&&(A.timestamp=Date.now(),A.offsetX=_.offsetX,A.offsetY=_.offsetY)}function nt(_){if(_.button===0)if(Date.now()-A.timestamp<T){const L=Math.abs(A.offsetX-_.offsetX),O=Math.abs(A.offsetY-_.offsetY);if(L<R&&O<R){const[W,kt]=re(_.offsetX,_.offsetY,d);D.zAdjust=us(W,kt,D.zAdjust),h(t.pFig,D.zAdjust,D.dLayers)}if(L>R&&O>R){const W=L/O,kt=1/W;if(W<J&&kt<J){const[xt,Ut]=re(_.offsetX,_.offsetY,d),[qt,It]=re(A.offsetX,A.offsetY,d),Ot=i.getContext("2d").canvas.width;D.zAdjust=vs(xt,Ut,qt,It,Ot,Ot),h(t.pFig,D.zAdjust,D.dLayers)}}}else console.log(`Warn205: ignore ${_.offsetX} ${_.offsetY} because too slow`)}function ct(_){if(v){const L=v.getContext("2d");if(_.buttons===1){const O=_.offsetX-A.offsetX,W=_.offsetY-A.offsetY;x(t.pFig,D.dLayers),L.beginPath(),L.rect(A.offsetX,A.offsetY,O,W),L.strokeStyle=ma.mouse,L.stroke()}if(D.dLayers.ruler){const[O,W]=re(_.offsetX,_.offsetY,d);L.clearRect(5,5,200,25),L.font="15px Arial",L.fillStyle=ma.ruler,L.fillText(`x: ${O.toFixed(4)} y: ${W.toFixed(4)}`,5,20)}}}let ot,b,U;function E(_){if(_.button===0){const[L,O]=re(_.offsetX,_.offsetY,D.zAdjust);ot=L,b=O,U=ds(D.zAdjust)}}function Y(_){if(_.buttons===1){const[L,O]=re(_.offsetX,_.offsetY,U);D.zAdjust=fs(ot,b,L,O,U),m(t.pFig,D.zAdjust,D.dLayers)}else if(D.dLayers.ruler&&i){const L=i.getContext("2d"),[O,W]=re(_.offsetX,_.offsetY,D.zAdjust);L.clearRect(5,5,200,25),L.font="15px Arial",L.fillStyle=ma.ruler,L.fillText(`x: ${O.toFixed(4)} y: ${W.toFixed(4)}`,5,20)}}function Q(_){_.preventDefault(),_.deltaY>0?D.zAdjust=$e(.7,D.zAdjust):D.zAdjust=$e(1.3,D.zAdjust),m(t.pFig,D.zAdjust,D.dLayers)}var H=_l();Sa("resize",rs,z);var st=s(H);bl(st,{});var it=a(st,2),G=s(it);V(G,"width",n),V(G,"height",n),G.__mousedown=B,G.__mouseup=nt,G.__mousemove=ct,aa(G,_=>v=_,()=>v);var vt=a(G,2);vl(vt,{get tMax(){return t.pDefSim.tMax},get tStep(){return t.pDefSim.tStep},get tUpdate(){return t.pDefSim.tUpdate},get simTime(){return c()},set simTime(_){c(_)}}),e(it);var ut=a(it,2),ft=s(ut);V(ft,"width",n),V(ft,"height",n),ft.__mousedown=E,ft.__mousemove=Y,aa(ft,_=>i=_,()=>i);var Mt=a(ft,2);fl(Mt,{zoomClick:f}),e(ut),e(H),Ss("innerWidth",_=>k(o,_,!0)),Sa("wheel",ft,Q),C(l,H),_t()}Ft(["mousedown","mouseup","mousemove"]);var gl=M("<tr><td> </td><td> </td><td> </td><td><i> </i></td><td><i> </i></td></tr>"),hl=M('<li class="svelte-1quie79"><input type="checkbox" class="toggle svelte-1quie79"/> <label class="label svelte-1quie79"><div class="arrow svelte-1quie79"></div> </label> <button class="svelte-1quie79"> </button> <button class="svelte-1quie79">Export parameters</button> <div class="nested svelte-1quie79"><article class="svelte-1quie79"> <strong> </strong> </article> <table class="svelte-1quie79"><thead class="svelte-1quie79"><tr><td>Num</td><td>Name</td><td>Value</td><td>Init</td><td>Set?</td></tr></thead><tbody class="svelte-1quie79"></tbody></table></div></li>'),pl=M('<section class="svelte-1quie79"><h2 class="svelte-1quie79">Sub-designs <span class="svelte-1quie79"> </span></h2> <ol class="svelte-1quie79"></ol></section>');function kl(l,t){bt(t,!0);const c=yt(()=>Object.keys(t.subD));async function n(h){const f=t.subD[h];Wa(f.partName,za(f.dparam),!0);const T=`${sa}${t.pLink[f.partName]}`;Ba(T)}function u(h){const f=t.subD[h].partName,T=t.subD[h].dparam,R=`sub-design parameters of ${f} from ${t.origPartName}`;xa(f,za(T),R)}function o(h){let f="[ ";return f+=`${we(ba(h[0]))}, `,f+=`${we(ba(h[1]))}, `,f+=`${we(ba(h[2]))} ]`,f}function v(h){let f="[ ";return f+=`${we(h[0])}, `,f+=`${we(h[1])}, `,f+=`${we(h[2])} ]`,f}function i(h){return h?"Yes":""}var d=pl(),x=s(d),m=a(s(x)),j=s(m);e(m),e(x);var z=a(x,2);Ct(z,20,()=>r(c),h=>h,(h,f)=>{var T=hl(),R=s(T);at(R),ms(R,!1);var J=a(R,2),A=a(s(J));e(J);var B=a(J,2);B.__click=()=>n(f);var nt=s(B);e(B);var ct=a(B,2);ct.__click=()=>u(f);var ot=a(ct,2),b=s(ot),U=s(b),E=a(U),Y=s(E,!0);e(E);var Q=a(E);e(b);var H=a(b,2),st=a(s(H));Ct(st,22,()=>Object.keys(t.subD[f].dparam),it=>it,(it,G,vt)=>{var ut=gl();let ft;var Mt=s(ut),_=s(Mt,!0);e(Mt);var L=a(Mt),O=s(L,!0);e(L);var W=a(L),kt=s(W,!0);e(W);var xt=a(W),Ut=s(xt),qt=s(Ut,!0);e(Ut),e(xt);var It=a(xt),Rt=s(It),Ot=s(Rt,!0);e(Rt),e(It),e(ut),et(Xt=>{ft=pt(ut,1,"svelte-1quie79",null,ft,{changed:t.subD[f].dparam[G].chg}),w(_,r(vt)+1),w(O,G),w(kt,t.subD[f].dparam[G].val),w(qt,t.subD[f].dparam[G].init),w(Ot,Xt)},[()=>i(t.subD[f].dparam[G].chg)]),C(it,ut)}),e(st),e(H),e(ot),e(T),et((it,G,vt)=>{V(R,"id",`cb_${f??""}`),V(J,"for",`cb_${f??""}`),w(A,` ${f??""}`),w(nt,`Go to ${t.pLink[t.subD[f].partName]??""}`),w(U,`${it??""} parameters of `),w(Y,t.subD[f].partName),w(Q,` with orientation ${G??""} (degree) at position
						${vt??""} (mm)`)},[()=>Object.keys(t.subD[f].dparam).length,()=>o(t.subD[f].orientation),()=>v(t.subD[f].position)]),C(h,T)}),e(z),e(d),et(()=>w(j,`(Number of sub-instances: ${r(c).length??""})`)),C(l,d),_t()}Ft(["click"]);var xl=M("<button> </button>"),Dl=M('<tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">2d- svg</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr>'),wl=M('<tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">2d- dxf</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr>'),jl=M('<!> <section class="svelte-ayb2uc"><h2 class="svelte-ayb2uc">Log</h2> <textarea rows="5" cols="94" readonly="" wrap="soft"></textarea></section> <section class="svelte-ayb2uc"><h2 class="svelte-ayb2uc">2D Drawings : <!> <button>All faces merged</button></h2></section> <!> <section class="svelte-ayb2uc"><h2 class="svelte-ayb2uc">Export</h2> <table class="svelte-ayb2uc"><caption class="svelte-ayb2uc">Output files</caption><thead class="svelte-ayb2uc"><tr class="svelte-ayb2uc"><th class="svelte-ayb2uc">#</th><th class="svelte-ayb2uc">Filename</th><th class="svelte-ayb2uc">Type</th><th class="svelte-ayb2uc">Preview</th><th class="svelte-ayb2uc">Download</th></tr></thead><tbody class="svelte-ayb2uc"><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc">1</td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">0-params- pxJson</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc">2</td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">1-log- txtLog</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><!><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">2d- svg</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><!><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">2d- dxf</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">4-pax- paxJson</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">5-script- scad</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">5-script- jsCad</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">5-script- pyFreecad</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">6-zip- zip</td><td class="svelte-ayb2uc"></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr></tbody></table> <dialog id="dBview" class="svelte-ayb2uc"><textarea readonly="" wrap="soft" class="svelte-ayb2uc"></textarea> <button class="bback svelte-ayb2uc">close - back - escape</button></dialog> <!></section>',1);function Ll(l,t){bt(t,!0);const c="ParametrixAll";function n(g){let F=!0;const P=/warn/i;return g.search(P)<0&&(F=!1),F}function u(g,F){let P=F;if(g.length===0)console.log("warn404: Drawing has an empty face list");else{const N=g.slice();N.push(c),N.includes(P)||(P=g[0])}return P}function o(g,F){let P;const N=Object.keys(g),tt=u(N,F);return N.includes(tt)?P=g[tt]:P=gs(g),P}let v=Z(0),i=Z(c);Ra(()=>{k(i,u(Object.keys(t.fgeom(0,K[t.pDef.partName]).fig),""),!0)});let d=yt(()=>t.fgeom(r(v),K[t.pDef.partName])),x=yt(()=>{const g=new Date().toLocaleTimeString();let F=`Geometry ${t.pDef.partName} computed at ${g}
`;return F+=r(d).logstr,F}),m=yt(()=>Object.keys(r(d).fig)),j=yt(()=>r(d).calcErr),z=yt(()=>n(r(d).logstr)),h=yt(()=>o(r(d).fig,r(i))),f=yt(()=>r(d).sub);function T(g,F){const P=document.createElement("a"),N=URL.createObjectURL(F);P.setAttribute("href",N),P.setAttribute("download",g),P.click(),P.remove(),URL.revokeObjectURL(N)}function R(g,F,P){const N=document.createElement("a"),tt="data:"+P+";utf-8,"+encodeURIComponent(F);N.setAttribute("href",tt),N.setAttribute("download",g),N.click(),N.remove()}function J(){const g=/[-:]/g,F=/\..*$/;return new Date().toISOString().replace(g,"").replace(F,"").replace("T","_")}async function A(g){const F=/^svg_/,P=/^dxf_/;let N=rt.eSVG,tt="all";g.match(F)?(N=rt.eSVG,tt=g.replace(F,"")):g.match(P)?(N=rt.eDXF,tt=g.replace(P,"")):g==="allsvg"?N=rt.eSVGALL:g==="alldxf"?N=rt.eDXFALL:g==="compute_log"?N=rt.eTXTLOG:g==="pax"?N=rt.ePAX:g==="oscad"?N=rt.eOPENSCAD:g==="ojscad"?N=rt.eJSCAD:g==="freecad"?N=rt.eFREECAD:g==="zip"?N=rt.eZIP:console.log(`err883: downloadExport iExportFace ${g} invalid`);const Nt=_s(N),mt=hs(N),Dt=ys(N),ht=t.pDef.partName+"_"+tt+"_"+J()+Nt;if(Dt){const zt=await bs(t.fgeom,r(v),K[t.pDef.partName],t.pDef,N);T(ht,zt)}else{const zt=Aa(t.fgeom,K[t.pDef.partName],t.pDef,tt,N);R(ht,zt,mt)}}async function B(){xa(t.pDef.partName,K[t.pDef.partName],"")}let nt,ct=Z("");function ot(g){k(ct,g,!0),nt.showModal()}function b(g,F){ot(Aa(t.fgeom,K[t.pDef.partName],t.pDef,g,F))}function U(){nt.close()}var E=jl(),Y=Lt(E);il(Y,{get pDef(){return t.pDef},get pFig(){return r(h)}});var Q=a(Y,2),H=a(s(Q),2);ga(H);let st;e(Q);var it=a(Q,2),G=s(it),vt=a(s(G));Ct(vt,16,()=>r(m),g=>g,(g,F)=>{var P=xl();P.__click=()=>{k(i,F,!0)};var N=s(P,!0);e(P),et(()=>{pt(P,1,Oa({theFace:r(i)===F}),"svelte-ayb2uc"),w(N,F)}),C(g,P)});var ut=a(vt,2);ut.__click=()=>{k(i,c)},e(G),e(it);var ft=a(it,2);yl(ft,{get pDefSim(){return t.pDef.sim},get pFig(){return r(h)},get simTime(){return r(v)},set simTime(g){k(v,g,!0)}});var Mt=a(ft,2),_=a(s(Mt),2),L=a(s(_),2),O=s(L),W=a(s(O)),kt=s(W);e(W);var xt=a(W,2),Ut=s(xt);Ut.__click=()=>{ot(Ks(t.pDef.partName,K[t.pDef.partName],""))},e(xt);var qt=a(xt),It=s(qt);It.__click=B,e(qt),e(O);var Rt=a(O),Ot=a(s(Rt)),Xt=s(Ot);e(Ot);var oe=a(Ot,2),Le=s(oe);Le.__click=()=>{b("all",rt.eTXTLOG)},e(oe);var ie=a(oe),Te=s(ie);Te.__click=async()=>{await A("compute_log")},e(ie),e(Rt);var ue=a(Rt);Ct(ue,18,()=>r(m),g=>g,(g,F,P)=>{var N=Dl(),tt=s(N),Nt=s(tt,!0);e(tt);var mt=a(tt),Dt=s(mt);e(mt);var ht=a(mt,2),zt=s(ht);zt.__click=()=>{b(F,rt.eSVG)},e(ht);var dt=a(ht),At=s(dt);At.__click=async()=>{await A(`svg_${F}`)},e(dt),e(N),et(()=>{w(Nt,3+r(P)),w(Dt,`${t.pDef.partName??""}_${F??""}.svg`)}),C(g,N)});var ve=a(ue),de=s(ve),la=s(de,!0);e(de);var fe=a(de),Ue=s(fe);e(fe);var me=a(fe,2),qe=s(me);qe.__click=()=>{b("all",rt.eSVGALL)},e(me);var Ie=a(me),Xe=s(Ie);Xe.__click=async()=>{await A("allsvg")},e(Ie),e(ve);var We=a(ve);Ct(We,18,()=>r(m),g=>g,(g,F,P)=>{var N=wl(),tt=s(N),Nt=s(tt,!0);e(tt);var mt=a(tt),Dt=s(mt);e(mt);var ht=a(mt,2),zt=s(ht);zt.__click=()=>{b(F,rt.eDXF)},e(ht);var dt=a(ht),At=s(dt);At.__click=async()=>{await A(`dxf_${F}`)},e(dt),e(N),et(()=>{w(Nt,4+r(m).length+r(P)),w(Dt,`${t.pDef.partName??""}_${F??""}.dxf`)}),C(g,N)});var Gt=a(We),Kt=s(Gt),Ye=s(Kt,!0);e(Kt);var be=a(Kt),Ve=s(be);e(be);var _e=a(be,2),ra=s(_e);ra.__click=()=>{b("all",rt.eDXFALL)},e(_e);var Se=a(_e),ye=s(Se);ye.__click=async()=>{await A("alldxf")},e(Se),e(Gt);var ge=a(Gt),Bt=s(ge),na=s(Bt,!0);e(Bt);var he=a(Bt),ca=s(he);e(he);var y=a(he,2),p=s(y);p.__click=()=>{b("all",rt.ePAX)},e(y);var S=a(y),q=s(S);q.__click=async()=>{await A("pax")},e(S),e(ge);var $=a(ge),lt=s($),Tt=s(lt,!0);e(lt);var Wt=a(lt),Pt=s(Wt);e(Wt);var Ht=a(Wt,2),Jt=s(Ht);Jt.__click=()=>{b("all",rt.eOPENSCAD)},e(Ht);var pe=a(Ht),gt=s(pe);gt.__click=async()=>{await A("oscad")},e(pe),e($);var Qt=a($),ke=s(Qt),$t=s(ke,!0);e(ke);var I=a(ke),oa=s(I);e(I);var Yt=a(I,2),Ee=s(Yt);Ee.__click=()=>{b("all",rt.eJSCAD)},e(Yt);var xe=a(Yt),ia=s(xe);ia.__click=async()=>{await A("ojscad")},e(xe),e(Qt);var te=a(Qt),ee=s(te),ua=s(ee,!0);e(ee);var ae=a(ee),va=s(ae);e(ae);var Ne=a(ae,2),da=s(Ne);da.__click=()=>{b("all",rt.eFREECAD)},e(Ne);var se=a(Ne),Ze=s(se);Ze.__click=async()=>{await A("freecad")},e(se),e(te);var Ge=a(te),Vt=s(Ge),Ke=s(Vt,!0);e(Vt);var ze=a(Vt),Ae=s(ze);e(ze);var Be=a(ze,3),Ce=s(Be);Ce.__click=async()=>{await A("zip")},e(Be),e(Ge),e(L),e(_);var De=a(_,2),le=s(De);ga(le);var He=a(le,2);He.__click=U,e(De),aa(De,g=>nt=g,()=>nt);var fa=a(De,2);kl(fa,{get subD(){return r(f)},get origPartName(){return t.pDef.partName},get pLink(){return t.pLink}}),e(Mt),et(()=>{ea(H,r(x)),st=pt(H,1,"svelte-ayb2uc",null,st,{colorErr:r(j),colorWarn:r(z)}),pt(ut,1,Oa({theFace:r(i)===c}),"svelte-ayb2uc"),w(kt,`px_${t.pDef.partName??""}.json`),w(Xt,`${t.pDef.partName??""}_all.log`),w(la,3+r(m).length),w(Ue,`${t.pDef.partName??""}_all.svg`),w(Ye,4+2*r(m).length),w(Ve,`${t.pDef.partName??""}_all.dxf`),w(na,5+2*r(m).length),w(ca,`${t.pDef.partName??""}_all.pax.json`),w(Tt,6+2*r(m).length),w(Pt,`${t.pDef.partName??""}_all_noarc_openscad.scad`),w($t,7+2*r(m).length),w(oa,`${t.pDef.partName??""}_all_noarc_jscad.js`),w(ua,8+2*r(m).length),w(va,`${t.pDef.partName??""}_all_freecad.py`),w(Ke,9+2*r(m).length),w(Ae,`${t.pDef.partName??""}_all.zip`),ea(le,r(ct))}),C(l,E),_t()}Ft(["click"]);var Sl=M('<h1 class="svelte-rl9kfz"> </h1> <article class="svelte-rl9kfz"> </article> <!> <!>',1);function Nl(l,t){bt(t,!0),Cs(t.pageDef);var c=Sl(),n=Lt(c),u=s(n,!0);e(n);var o=a(n,2),v=s(o);e(o);var i=a(o,2);Ms(i,{get pDef(){return t.pageDef.pDef}});var d=a(i,2);Ll(d,{get pDef(){return t.pageDef.pDef},get fgeom(){return t.pageDef.pGeom},get pLink(){return t.pLink}}),et(()=>{w(u,t.pageDef.pTitle),w(v,`[${t.pageDef.pDef.partName??""}]: ${t.pageDef.pDescription??""}`)}),C(l,c),_t()}function Xl(l,t){bt(t,!0),Nl(l,{get pageDef(){return t.data.pageDef},get pLink(){return t.data.allLink}}),_t()}export{Xl as component,Il as universal};
