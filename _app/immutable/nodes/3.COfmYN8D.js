import{a as ja,b as Ga}from"../chunks/BrFgIFGk.js";import{H as Ba,a as Ra,g as Ha}from"../chunks/DBd7PzsV.js";import"../chunks/DsnmJJEf.js";import{i as ca,aR as pa,J as Gt,a8 as Ja,aS as Ua,o as Qa,aT as $a,aU as ts,W as es,H as as,w as qa,a9 as Ia,aV as ss,aW as ls,ah as h,g as r,aD as rs,ag as ee,aX as Ft,p as yt,at as Ve,a as jt,b as C,c as gt,f as T,d as s,r as e,t as et,s as a,as as K,au as ht,e as w,aw as wt,u as ka,aY as We,aZ as la,av as La,a_ as ga,a$ as Na,b0 as ns}from"../chunks/CziT1XCT.js";import{s as E,e as zt,q as ha,t as st,u as oa,w as cs,x as os,y as is,z as us,A as xa,P as ra,B as za,C as na,D as $t,F as vs,G as ds,H as fs,I as ms,J as ma,K as bs,L as Aa,r as _s,l as be,m as ba,M as nt,N as ys,O as Ca,Q as gs,R as hs,S as ps,T as ks}from"../chunks/42yezLui.js";import{p as Lt,i as te,b as ia}from"../chunks/RgFtBYQ_.js";import{s as xs}from"../chunks/qGOfSBod.js";import{p as Oa}from"../chunks/QXTPSMoD.js";import{a as Ds,o as ws}from"../chunks/fCVZ51zT.js";import{i as Ss}from"../chunks/C2Rxz0g2.js";function Xa(l){var t,c,n="";if(typeof l=="string"||typeof l=="number")n+=l;else if(typeof l=="object")if(Array.isArray(l)){var u=l.length;for(t=0;t<u;t++)l[t]&&(c=Xa(l[t]))&&(n&&(n+=" "),n+=c)}else for(c in l)l[c]&&(n&&(n+=" "),n+=c);return n}function js(){for(var l,t,c=0,n="",u=arguments.length;c<u;c++)(l=arguments[c])&&(t=Xa(l))&&(n&&(n+=" "),n+=t);return n}function Pa(l){return typeof l=="object"?js(l):l??""}const Fa=[...` 	
\r\fÂ \v\uFEFF`];function Ls(l,t,c){var n=l==null?"":""+l;if(t&&(n=n?n+" "+t:t),c){for(var u in c)if(c[u])n=n?n+" "+u:u;else if(n.length)for(var o=u.length,v=0;(v=n.indexOf(u,v))>=0;){var i=v+o;(v===0||Fa.includes(n[v-1]))&&(i===n.length||Fa.includes(n[i]))?n=(v===0?"":n.substring(0,v))+n.substring(i+1):v=i}}return n===""?null:n}function pt(l,t,c,n,u,o){var v=l.__className;if(ca||v!==c||v===void 0){var i=Ls(c,n,o);(!ca||i!==l.getAttribute("class"))&&(i==null?l.removeAttribute("class"):l.className=i),l.__className=c}else if(o&&u!==o)for(var d in o){var p=!!o[d];(u==null||p!==!!u[d])&&l.classList.toggle(d,p)}return o}function Wa(l,t,c=!1){if(l.multiple){if(t==null)return;if(!Qa(t))return $a();for(var n of l.options)n.selected=t.includes(Ee(n));return}for(n of l.options){var u=Ee(n);if(ts(u,t)){n.selected=!0;return}}(!c||t!==void 0)&&(l.selectedIndex=-1)}function Ns(l){var t=new MutationObserver(()=>{Wa(l,l.__value)});t.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),es(()=>{t.disconnect()})}function Ma(l,t,c=t){var n=new WeakSet,u=!0;pa(l,"change",o=>{var v=o?"[selected]":":checked",i;if(l.multiple)i=[].map.call(l.querySelectorAll(v),Ee);else{var d=l.querySelector(v)??l.querySelector("option:not([disabled])");i=d&&Ee(d)}c(i),Gt!==null&&n.add(Gt)}),Ja(()=>{var o=t();if(l===document.activeElement){var v=Ua??Gt;if(n.has(v))return}if(Wa(l,o,u),u&&o===void 0){var i=l.querySelector(":checked");i!==null&&(o=Ee(i),c(o))}l.__value=o,u=!1}),Ns(l)}function Ee(l){return"__value"in l?l.__value:l.value}function _e(l,t,c=t){var n=new WeakSet;pa(l,"input",async u=>{var o=u?l.defaultValue:l.value;if(o=_a(l)?ya(o):o,c(o),Gt!==null&&n.add(Gt),await as(),o!==(o=t())){var v=l.selectionStart,i=l.selectionEnd,d=l.value.length;if(l.value=o??"",i!==null){var p=l.value.length;v===i&&i===d&&p>d?(l.selectionStart=p,l.selectionEnd=p):(l.selectionStart=v,l.selectionEnd=Math.min(i,p))}}}),(ca&&l.defaultValue!==l.value||qa(t)==null&&l.value)&&(c(_a(l)?ya(l.value):l.value),Gt!==null&&n.add(Gt)),Ia(()=>{var u=t();if(l===document.activeElement){var o=Ua??Gt;if(n.has(o))return}_a(l)&&u===ya(l.value)||l.type==="date"&&!u&&!l.value||u!==l.value&&(l.value=u??"")})}function St(l,t,c=t){pa(l,"change",n=>{var u=n?l.defaultChecked:l.checked;c(u)}),(ca&&l.defaultChecked!==l.checked||qa(t)==null)&&c(l.checked),Ia(()=>{var n=t();l.checked=!!n})}function _a(l){var t=l.type;return t==="number"||t==="range"}function ya(l){return l===""?null:+l}function zs(l,t){ss(window,["resize"],()=>ls(()=>t(window[l])))}function As(l){var t=rs(0);return function(){return arguments.length===1?(h(t,r(t)+1),arguments[0]):(r(t),l())}}function Cs(l,t){throw new Ba(l,t)}function Os({params:l}){const t=l.design;if(Object.keys(ja).includes(t))return{pageDef:ja[t],allLink:Ga};Cs(404,"Design undefined!")}const Xl=Object.freeze(Object.defineProperty({__proto__:null,load:Os},Symbol.toStringTag,{value:"Module"})),H=ee({});function Ya(l,t,c){if(Object.keys(H).includes(l)){const u=H[l],o=Object.keys(u);for(const v of Object.keys(t))o.includes(v)?c&&(u[v]=t[v]):u[v]=t[v];H[l]=u}else H[l]=t}function Ps(l){const t=l.pDef.partName,c={};for(const n of l.pDef.params)c[n.name]=n.init;Ya(t,c,!1)}var Fs=T('<aside class="backdrop svelte-1qqjtat"><div class="dialog svelte-1qqjtat"><button class="svelte-1qqjtat"><img/></button></div></aside>');function Ea(l,t){yt(t,!0);let c=Lt(t,"modalOpen",15);function n(){c(!1)}var u=Ve(),o=jt(u);{var v=i=>{var d=Fs(),p=s(d),m=s(p);m.__click=n;var j=s(m);e(m),e(p),e(d),et(()=>{E(j,"src",t.svgPath),E(j,"alt",t.svgPath)}),C(i,d)};te(o,i=>{c()&&i(v)})}C(l,u),gt()}Ft(["click"]);var Ms=T('<button class="svelte-j14xk7"><img class="svelte-j14xk7"/></button>'),Ts=T('<section class="svelte-j14xk7"><!> <!></section>');function Rs(l,t){yt(t,!0);function c(m){const j=[];for(const z of Object.values(m.paramSvg))j.includes(z)||j.push(z);return j}let n=K(!1),u=K(""),o=ht(()=>c(t.pDef).map(m=>ha(`/pgdsvg/${m}`)));function v(m){h(u,m,!0),h(n,!0)}var i=Ts(),d=s(i);Ea(d,{get svgPath(){return r(u)},get modalOpen(){return r(n)},set modalOpen(m){h(n,m,!0)}});var p=a(d,2);zt(p,16,()=>r(o),m=>m,(m,j)=>{var z=Ms();z.__click=()=>v(j);var k=s(z);e(z),et(()=>{E(k,"src",j),E(k,"alt",j)}),C(m,z)}),e(i),C(l,i),gt()}Ft(["click"]);var Us=T('<aside class="backdrop svelte-i17c2v"><div><article class="question svelte-i17c2v"><!></article> <footer class="svelte-i17c2v"><button class="cancel svelte-i17c2v">Cancel</button> <button class="ok svelte-i17c2v"> </button></footer></div></aside>');function Ye(l,t){yt(t,!0);let c=Lt(t,"okName",3,"Ok"),n=Lt(t,"modalOpen",15),u=Lt(t,"sizeLarge",3,!1);function o(){n(!1)}function v(){t.okFunc(),n(!1)}var i=Ve(),d=jt(i);{var p=m=>{var j=Us(),z=s(j);let k;var f=s(z),q=s(f);xs(q,()=>t.children),e(f);var R=a(f,2),V=s(R);V.__click=o;var A=a(V,2);A.__click=v;var Q=s(A,!0);e(A),e(R),e(z),e(j),et(()=>{k=pt(z,1,"dialog svelte-i17c2v",null,k,{sizeLarge:u()}),w(Q,c())}),C(m,j)};te(d,m=>{n()&&m(p)})}C(l,i),gt()}Ft(["click"]);var qs=T('<p class="diagItem svelte-19mawtt"> </p>'),Is=T('<p class="diagTitle svelte-19mawtt">Do you really want to delete the following localStorage keys?</p> <!>',1),Xs=T('<tr class="svelte-19mawtt"><td><input type="checkbox"/></td><td class="svelte-19mawtt"><button class="svelte-19mawtt"> </button></td><td> </td></tr>'),Ws=T('<div class="deleteKeys svelte-19mawtt"><button class="svelte-19mawtt">Delete</button> <!> <table class="svelte-19mawtt"><thead class="svelte-19mawtt"><tr><td>Delete</td><td>Key name</td><td>Last modification</td></tr><tr><td><input type="checkbox"/></td><td class="instruction">delete all</td><td></td></tr></thead><tbody class="svelte-19mawtt"></tbody></table></div>');function Va(l,t){yt(t,!0);let c=Lt(t,"storeName",15),n=Lt(t,"localKeys",15),u=K(ee({})),o=K(!1),v=K(!1);function i(){let b=[];const U=new RegExp(`^${t.pageName}_`);return b=Object.keys(window.localStorage).filter(Y=>U.test(Y)).map(Y=>Y.replace(U,"")),b.sort(),b}n(i());function d(b){c(b)}function p(b){let U={};for(const Z of b){let Y="";const $=`${t.pageName}_${Z}`,J=window.localStorage.getItem($);J!==null&&(Y=JSON.parse(J).lastModif),U[Z]=Y}return U}let m=ht(()=>p(n()));function j(b){let U={};for(const Z of b)U[Z]=!1;return U}h(u,j(n()),!0);function z(){for(const b of n())r(u)[b]=r(o)}function k(){for(const b of n())if(r(u)[b]){const U=`${t.pageName}_${b}`;window.localStorage.removeItem(U)}h(o,!1),n(i())}var f=Ws(),q=s(f);q.__click=()=>{h(v,!0)};var R=a(q,2);Ye(R,{okName:"Confirm",okFunc:k,get modalOpen(){return r(v)},set modalOpen(b){h(v,b,!0)},children:(b,U)=>{var Z=Is(),Y=a(jt(Z),2);zt(Y,16,n,$=>$,($,J)=>{var it=Ve(),at=jt(it);{var G=ft=>{var rt=qs(),ut=s(rt,!0);e(rt),et(()=>w(ut,J)),C(ft,rt)};te(at,ft=>{r(u)[J]&&ft(G)})}C($,it)}),C(b,Z)},$$slots:{default:!0}});var V=a(R,2),A=s(V),Q=a(s(A)),lt=s(Q),ct=s(lt);st(ct),ct.__change=z,e(lt),wt(2),e(Q),e(A);var ot=a(A);zt(ot,20,n,b=>b,(b,U)=>{var Z=Xs(),Y=s(Z),$=s(Y);st($),e(Y);var J=a(Y),it=s(J);it.__click=()=>d(U);var at=s(it,!0);e(it),e(J);var G=a(J),ft=s(G,!0);e(G),e(Z),et(()=>{w(at,U),w(ft,r(m)[U])}),St($,()=>r(u)[U],rt=>r(u)[U]=rt),C(b,Z)}),e(ot),e(V),e(f),St(ct,()=>r(o),b=>h(o,b)),C(l,f),gt()}Ft(["click","change"]);var Ys=T('<p class="warnMsg svelte-1dviuxk"> </p>'),Es=T('<!> <div class="svelte-1dviuxk"><label for="storName" class="svelte-1dviuxk">Give a name to your parameter-set:</label> <input type="text" id="storName" required minlength="4" maxlength="30" size="32" class="svelte-1dviuxk"/> <!></div>',1);function Vs(l,t){yt(t,!0);let c=Lt(t,"storeName",15),n=K(ee([]));function u(z){const k=/[-:]/g,f=/\..*$/,q=new Date().toISOString().replace(k,"").replace(f,"").replace("T","_");return`${z}_${q}`}c(u(t.pageName));let o=ht(()=>r(n).includes(c()));var v=Es(),i=jt(v);Va(i,{get pageName(){return t.pageName},get storeName(){return c()},set storeName(z){c(z)},get localKeys(){return r(n)},set localKeys(z){h(n,z,!0)}});var d=a(i,2),p=a(s(d),2);st(p);var m=a(p,2);{var j=z=>{var k=Ys(),f=s(k);e(k),et(()=>w(f,`Warning: name ${c()??""} already used`)),C(z,k)};te(m,z=>{r(o)&&z(j)})}e(d),_e(p,c),C(l,v),gt()}var Zs=T('<!> <div class="svelte-116vgu9"><label for="storName" class="svelte-116vgu9">Select a parameter-set:</label> <input type="text" id="storName" readonly="" minlength="4" maxlength="30" size="32" class="svelte-116vgu9"/></div>',1);function Ks(l,t){yt(t,!0);let c=Lt(t,"storeName",15),n=K(ee([]));function u(p){let m=c();return!p.includes(m)&&(p.length>0?m=p[0]:m=""),m}ka(()=>{c(u(r(n)))});var o=Zs(),v=jt(o);Va(v,{get pageName(){return t.pageName},get storeName(){return c()},set storeName(p){c(p)},get localKeys(){return r(n)},set localKeys(p){h(n,p,!0)}});var i=a(v,2),d=a(s(i),2);st(d),e(i),et(()=>oa(d,c())),C(l,o),gt()}const D=ee({dLayers:os(),zAdjust:cs(),canvasZWidth:0});var Gs=T('<canvas class="mini svelte-1lfrqpx"></canvas>');function Ta(l,t){yt(t,!0);const c=200,n=.6;let u;function o(d,p,m,j){const z=is(j);z.ruler=!1;let k;if(u){const f=u.getContext("2d");f.clearRect(0,0,f.canvas.width,f.canvas.height);const q=f.canvas.width;try{t.full?k=d.getAdjustFull(f.canvas.width,f.canvas.height):k=us(m,q,p),d.draw(f,k,z)}catch(R){console.log(R)}}}ka(()=>{o(t.pFig,D.zAdjust,D.canvasZWidth,D.dLayers)});function v(d){const p=d.offsetX,m=d.offsetY,j=u.getContext("2d"),z=j.canvas.width/2,k=j.canvas.height/2;if(d.button===0){let f=1;p>z&&(f+=1*n),m>k&&(f+=2*n),j.canvas.width=f*c,j.canvas.height=f*c,o(t.pFig,D.zAdjust,D.canvasZWidth,D.dLayers)}}var i=Gs();E(i,"width",c),E(i,"height",c),i.__click=v,ia(i,d=>u=d,()=>u),C(l,i),gt()}Ft(["click"]);function Bs(l,t){const c=document.createElement("a");c.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),c.setAttribute("download",l),c.click(),c.remove()}function Hs(l,t,c){const n=/[-:]/g,u=/\..*$/,o=new Date().toISOString().replace(n,"").replace(u,"").replace("T","_");return xa(o,l,t,c)}function Da(l,t,c){const n=/[-:]/g,u=/\..*$/,o=new Date().toISOString().replace(n,"").replace(u,"").replace("T","_"),v=`px_${l}_${o}.json`,i=xa(o,l,t,c);Bs(v,i)}function Js(l,t,c){const n=new URL(l),u=2e3;let o=n.toString().length;for(const v of Object.keys(t)){const i=t[v].toString(),d=2+v.length+i.length;n.searchParams.append(encodeURIComponent(v),encodeURIComponent(i)),o+=d}return o>=u&&console.log(`warn547: generateUrl: strLength ${o} larger than strLengthLimit ${u}`),n.toString()}const Qs=Symbol();class $s extends URLSearchParams{#t=K(0);#s=el();#e=!1;#a(){if(!this.#s||this.#e)return;this.#e=!0;const t=this.toString();this.#s.search=t&&`?${t}`,this.#e=!1}[Qs](t){if(!this.#e){this.#e=!0;for(const c of[...super.keys()])super.delete(c);for(const[c,n]of t)super.append(c,n);We(this.#t),this.#e=!1}}append(t,c){super.append(t,c),this.#a(),We(this.#t)}delete(t,c){var n=super.has(t,c);super.delete(t,c),n&&(this.#a(),We(this.#t))}get(t){return r(this.#t),super.get(t)}getAll(t){return r(this.#t),super.getAll(t)}has(t,c){return r(this.#t),super.has(t,c)}keys(){return r(this.#t),super.keys()}set(t,c){var n=super.getAll(t).join("");super.set(t,c),n!==super.getAll(t).join("")&&(this.#a(),We(this.#t))}sort(){super.sort(),this.#a(),We(this.#t)}toString(){return r(this.#t),super.toString()}values(){return r(this.#t),super.values()}entries(){return r(this.#t),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return r(this.#t),super.size}}let tl=null;function el(){return tl}var al=T('<input type="number" class="input-number svelte-1faty33"/> <input type="range" class="svelte-1faty33"/>',1),sl=T("<option> </option>"),ll=T("<select></select>"),rl=T("<option> </option>"),nl=T("<select></select>"),cl=T('<tr><td class="svelte-1faty33"> </td><td class="svelte-1faty33"><button class="svelte-1faty33"> </button></td><td class="svelte-1faty33"><!></td><td> </td><td> </td><td class="svelte-1faty33"> </td><td class="svelte-1faty33"> </td><td> </td></tr>'),ol=T('<tbody class="svelte-1faty33"><tr class="separator svelte-1faty33"><td class="svelte-1faty33"> </td><td class="svelte-1faty33"> </td><td class="svelte-1faty33"><label class="svelte-1faty33"><input type="checkbox" class="svelte-1faty33"/> <span class="svelte-1faty33"></span></label></td></tr></tbody> <tbody></tbody>',1),il=T('<p>Copy this URL and send it to your friends!</p> <p class="cUrl svelte-1faty33"> </p>',1),ul=T('<section class="svelte-1faty33"><h2 class="svelte-1faty33">Parameters</h2> <main class="svelte-1faty33"><label for="loadFParams" class="fileUpload svelte-1faty33">Load Params from File</label> <input id="loadFParams" type="file" accept="text/plain, application/json" class="svelte-1faty33"/> <button class="svelte-1faty33">Set Params Default</button> <button class="svelte-1faty33">Load Params from localStorage</button> <!> <!> <textarea rows="3" cols="80" readonly="" wrap="soft"></textarea> <table class="svelte-1faty33"><thead class="svelte-1faty33"><tr class="svelte-1faty33"><td class="svelte-1faty33">&#35;</td><td class="svelte-1faty33">Parameter name</td><td class="svelte-1faty33">Value<span class="svelte-1faty33"><button class="svelte-1faty33">&minus;</button><button class="svelte-1faty33">+</button></span></td><td>Unit</td><td>Default</td><td class="svelte-1faty33">Min</td><td class="svelte-1faty33">Max</td><td>Step</td></tr></thead><!></table> <div class="comment svelte-1faty33"><label for="inComment">Comment:</label> <input type="text" id="inComment" maxlength="150"/></div> <button class="svelte-1faty33">Save Parameters to File</button> <button class="svelte-1faty33">Save Parameters as URL</button> <button class="svelte-1faty33">Save Parameters to localStorage</button> <!> <!></main> <!> <button class="side-img svelte-1faty33"><img class="svelte-1faty33"/></button> <div class="mini-canvas svelte-1faty33"><!></div> <div class="mini-canvas svelte-1faty33"><!></div></section>');function vl(l,t){yt(t,!0);let c=K(""),n=K(!1),u=K(""),o=K(!1),v=K(!1),i=K(!1),d=K(!1),p=K(!1),m=K(""),j=K(""),z=K("");const k=t.pDef;let f=K(ee(at(k.params[0].name))),q=K(!1),R=K(ee(ut(rt(k.params))));Ra(()=>{h(f,at(t.pDef.params[0].name),!0),h(R,ut(rt(t.pDef.params)),!0)});function V(y,g){let N="",M=!1;y!==t.pDef.partName&&(N+=`warn361: read partName: '${y}'  expected partName: '${t.pDef.partName}'
`,M=!0);let tt=0,vt=0,Nt=0;const ie=[];for(const mt of t.pDef.params)ie.push(mt.name),Object.hasOwn(g,mt.name)?(tt+=1,H[t.pDef.partName][mt.name]===g[mt.name]?Nt+=1:H[t.pDef.partName][mt.name]=g[mt.name]):vt+=1;let xt=0;for(const mt of Object.keys(g))ie.includes(mt)||(xt+=1,N+=`warn363: parameter ${mt} not in the scope of the design (${xt})
`);const Le=xt>0,Et=new Date().toLocaleTimeString();return N+=`Params loaded at ${Et} :`,N+=` def-nb: ${Object.keys(t.pDef.params).length}`,N+=`, cover-nb: ${tt}, uncover-nb: ${vt}
`,N+=` load-nb: ${Object.keys(g).length}`,N+=`, equal-nb: ${Nt}, changed-nb: ${tt-Nt}`,N+=`, out-of-scope: ${xt}`,[N,M||Le]}async function A(y){try{const g=await fetch(y);if(!g.ok)throw`err627: error while fetching ${y}`;const N=await g.text(),[M]=za(N);(tt=>{var vt=la(tt,2);h(u,vt[0],!0),h(o,vt[1],!0)})(V(M.partName,M.pVal)),h(c,M.comment,!0)}catch(g){let N=`err223: error by fetching px file
`;N+=g,h(u,N,!0),h(o,!0)}}async function Q(){{const y=new $s(Oa.url.search),g="pxUrl";if(y.has(g)){const M=y.get(g);y.delete(g),M?await A(M):(h(u,`err123: error by parsing URL-search-params
`),h(o,!0))}const N={};for(const[M,tt]of y){const vt=Number(tt);isNaN(vt)||(N[M]=vt)}Object.keys(N).length>0&&(M=>{var tt=la(M,2);h(u,tt[0],!0),h(o,tt[1],!0)})(V(t.pDef.partName,N))}}Q();function lt(y){try{const[g]=za(y);(N=>{var M=la(N,2);h(u,M[0],!0),h(o,M[1],!0)})(V(g.partName,g.pVal)),h(c,g.comment,!0)}catch(g){let N=`err723: error by parsing parameter file
`;N+=g,h(u,N,!0),h(o,!0)}}async function ct(y){const g=await y.text();lt(g)}function ot(y){if(y.target){const g=y.target.files;g&&ct(g[0])}}function b(){Da(t.pDef.partName,H[t.pDef.partName],r(c))}function U(){const y={};for(const g of t.pDef.params)y[g.name]=g.init;(g=>{var N=la(g,2);h(u,N[0],!0),h(o,N[1],!0)})(V(t.pDef.partName,y))}function Z(){if(r(m)!==void 0&&r(m)!==""){const y=`${t.pDef.partName}_${r(m)}`;{const g=window.localStorage.getItem(y);g===null?(h(u,`Warn157: localStorage key ${y} is null`),h(o,!0)):lt(g)}}else h(u,"Warn239: No valid name for loading from localStorage!"),h(o,!0)}function Y(){if(r(j)!==void 0&&r(j)!==""){const y=`${t.pDef.partName}_${r(j)}`,g=/\..*$/,N=new Date().toISOString().replace(g,""),M=xa(N,t.pDef.partName,H[t.pDef.partName],r(c));window.localStorage.setItem(y,M)}else console.log("Warn639: No valid name for writing to localStorage!")}function $(){return Js(Oa.url.href,H[t.pDef.partName]).toString()}function J(){h(z,$(),!0),h(d,!0)}function it(){}function at(y){let g=ha("/pgdsvg/default_param_blank.svg");return Object.keys(t.pDef.paramSvg).includes(y)&&(g=ha(`/pgdsvg/${t.pDef.paramSvg[y]}`)),g}function G(y){h(f,at(y),!0)}function ft(){h(q,!0)}function rt(y){const g=[];let M={sectionName:"main",sectionID:"g0main",sectionVisCollapse:!1,params:[]},tt=0;for(const vt of y)vt.pType===ra.eSectionSeparator?(g.push(M),tt+=1,M={sectionName:vt.name,sectionID:`g${tt}${vt.name}`,sectionVisCollapse:!0,params:[]}):M.params.push(vt);return g.push(M),g}function ut(y){const g={};for(const N of y)g[N.sectionID]=N.sectionVisCollapse;return g}let Mt=ht(()=>rt(t.pDef.params));function _(){h(n,!0)}function L(){h(n,!1)}let O=ht(()=>r(n)?2:4),X=ht(()=>r(n)?2:3),At=ht(()=>r(n)?50:70);var kt=ul(),Tt=a(s(kt),2),qt=a(s(Tt),2);qt.__change=ot;var It=a(qt,2);It.__click=()=>{h(v,!0)};var Rt=a(It,2);Rt.__click=()=>{h(i,!0)};var Ct=a(Rt,2);Ye(Ct,{okName:"Overwrite Parameters",okFunc:U,get modalOpen(){return r(v)},set modalOpen(y){h(v,y,!0)},children:(y,g)=>{wt();var N=La("Load the default parameters ?");C(y,N)},$$slots:{default:!0}});var ae=a(Ct,2);Ye(ae,{okName:"Load Parameters",okFunc:Z,get modalOpen(){return r(i)},set modalOpen(y){h(i,y,!0)},children:(y,g)=>{Ks(y,{get pageName(){return t.pDef.partName},get storeName(){return r(m)},set storeName(N){h(m,N,!0)}})},$$slots:{default:!0}});var Wt=a(ae,2);ga(Wt);let Ze;var se=a(Wt,2),ye=s(se),ge=s(ye),Bt=a(s(ge),2),le=a(s(Bt)),Ke=s(le);Ke.__click=_;var he=a(Ke);he.__click=L,e(le),e(Bt);var Ge=a(Bt);let re;var Be=a(Ge);let pe;var ua=a(Be,3);let ke;e(ge),e(ye);var xe=a(ye);zt(xe,19,()=>r(Mt),y=>y.sectionName,(y,g,N)=>{var M=ol(),tt=jt(M),vt=s(tt),Nt=s(vt),ie=s(Nt,!0);e(Nt);var xt=a(Nt),Le=s(xt,!0);e(xt);var Et=a(xt),Ne=s(Et),mt=s(Ne);st(mt),wt(2),e(Ne),e(Et),e(vt),e(tt);var Jt=a(tt,2);let ea;zt(Jt,23,()=>r(g).params,Xt=>Xt.name,(Xt,W,ze)=>{var ue=cl();let Ae;var Ce=s(ue),Oe=s(Ce);e(Ce);var Qt=a(Ce),Pe=s(Qt);Pe.__click=()=>G(r(W).name);var Fe=s(Pe,!0);e(Pe),e(Qt);var Me=a(Qt),Te=s(Me);{var va=P=>{var F=al(),S=jt(F);st(S);var B=a(S,2);st(B),et(()=>{E(S,"min",r(W).min),E(S,"max",r(W).max),E(S,"step",r(W).step),E(B,"min",r(W).min),E(B,"max",r(W).max),E(B,"step",r(W).step)}),_e(S,()=>H[t.pDef.partName][r(W).name],Ot=>H[t.pDef.partName][r(W).name]=Ot),_e(B,()=>H[t.pDef.partName][r(W).name],Ot=>H[t.pDef.partName][r(W).name]=Ot),C(P,F)},aa=P=>{var F=Ve(),S=jt(F);{var B=bt=>{var Dt=ll();zt(Dt,22,()=>["Off","On"],dt=>dt,(dt,Pt,Ut)=>{var _t=sl(),Zt=s(_t,!0);e(_t);var Kt={};et(()=>{w(Zt,Pt),Kt!==(Kt=r(Ut))&&(_t.value=(_t.__value=r(Ut))??"")}),C(dt,_t)}),e(Dt),Ma(Dt,()=>H[t.pDef.partName][r(W).name],dt=>H[t.pDef.partName][r(W).name]=dt),C(bt,Dt)},Ot=bt=>{var Dt=Ve(),dt=jt(Dt);{var Pt=_t=>{var Zt=nl();zt(Zt,22,()=>r(W).dropdown,Kt=>Kt,(Kt,Za,wa)=>{var Xe=rl(),Ka=s(Xe,!0);e(Xe);var Sa={};et(()=>{w(Ka,Za),Sa!==(Sa=r(wa))&&(Xe.value=(Xe.__value=r(wa))??"")}),C(Kt,Xe)}),e(Zt),Ma(Zt,()=>H[t.pDef.partName][r(W).name],Kt=>H[t.pDef.partName][r(W).name]=Kt),C(_t,Zt)},Ut=_t=>{var Zt=La("unknown");C(_t,Zt)};te(dt,_t=>{r(W).pType===ra.eDropdown?_t(Pt):_t(Ut,!1)},!0)}C(bt,Dt)};te(S,bt=>{r(W).pType===ra.eCheckbox?bt(B):bt(Ot,!1)},!0)}C(P,F)};te(Te,P=>{r(W).pType===ra.eNumber?P(va):P(aa,!1)})}e(Me);var ve=a(Me);let Re;var Ue=s(ve,!0);e(ve);var de=a(ve);let fe;var da=s(de,!0);e(de);var me=a(de),fa=s(me,!0);e(me);var Vt=a(me),qe=s(Vt,!0);e(Vt);var Ie=a(Vt);let sa;var x=s(Ie,!0);e(Ie),e(ue),et(()=>{Ae=pt(ue,1,"svelte-1faty33",null,Ae,{changed:H[t.pDef.partName][r(W).name]!==r(W).init}),w(Oe,`${r(N)+1}.${r(ze)+1}`),w(Fe,r(W).name),Re=pt(ve,1,"svelte-1faty33",null,Re,{hideColumn:r(n)}),w(Ue,r(W).unit),fe=pt(de,1,"svelte-1faty33",null,fe,{hideColumn:r(n)}),w(da,r(W).init),w(fa,r(W).min),w(qe,r(W).max),sa=pt(Ie,1,"svelte-1faty33",null,sa,{hideColumn:r(n)}),w(x,r(W).step)}),C(Xt,ue)}),e(Jt),et(()=>{w(ie,r(N)+1),E(xt,"colspan",r(O)),w(Le,r(g).sectionName),E(Et,"colspan",r(X)),ea=pt(Jt,1,"svelte-1faty33",null,ea,{collaps:r(R)[r(g).sectionID]})}),St(mt,()=>r(R)[r(g).sectionID],Xt=>r(R)[r(g).sectionID]=Xt),C(y,M)}),e(se);var Ht=a(se,2),De=a(s(Ht),2);st(De),e(Ht);var ne=a(Ht,2);ne.__click=b;var He=a(ne,2);He.__click=J;var ce=a(He,2);ce.__click=()=>{h(p,!0)};var Je=a(ce,2);Ye(Je,{okName:"Done",okFunc:it,sizeLarge:!0,get modalOpen(){return r(d)},set modalOpen(y){h(d,y,!0)},children:(y,g)=>{var N=il(),M=a(jt(N),2),tt=s(M,!0);e(M),et(()=>w(tt,r(z))),C(y,N)},$$slots:{default:!0}});var Qe=a(Je,2);Ye(Qe,{okName:"Save into localStorage",okFunc:Y,get modalOpen(){return r(p)},set modalOpen(y){h(p,y,!0)},children:(y,g)=>{Vs(y,{get pageName(){return t.pDef.partName},get storeName(){return r(j)},set storeName(N){h(j,N,!0)}})},$$slots:{default:!0}}),e(Tt);var $e=a(Tt,2);Ea($e,{get svgPath(){return r(f)},get modalOpen(){return r(q)},set modalOpen(y){h(q,y,!0)}});var Yt=a($e,2);Yt.__click=ft;var oe=s(Yt);e(Yt);var we=a(Yt,2),Se=s(we);Ta(Se,{get pFig(){return t.pFig},full:!0}),e(we);var ta=a(we,2),je=s(ta);Ta(je,{get pFig(){return t.pFig},full:!1}),e(ta),e(kt),et(()=>{oa(Wt,r(u)),Ze=pt(Wt,1,"svelte-1faty33",null,Ze,{colorWarn:r(o)}),re=pt(Ge,1,"svelte-1faty33",null,re,{hideColumn:r(n)}),pe=pt(Be,1,"svelte-1faty33",null,pe,{hideColumn:r(n)}),ke=pt(ua,1,"svelte-1faty33",null,ke,{hideColumn:r(n)}),E(De,"size",r(At)),E(oe,"src",r(f)),E(oe,"alt",r(f))}),_e(De,()=>r(c),y=>h(c,y)),C(l,kt),gt()}Ft(["change","click"]);var dl=T('<nav class="svelte-h4jojj"><button class="svelte-h4jojj">0</button> <button class="svelte-h4jojj">&lt-</button> <button class="svelte-h4jojj">|&lt</button> <button class="svelte-h4jojj">||</button> <button class="svelte-h4jojj">&gt|</button> <button class="svelte-h4jojj">-&gt</button> <input type="range" min="0" class="svelte-h4jojj"/> <input type="number" min="0" class="svelte-h4jojj"/></nav>');function fl(l,t){yt(t,!0);let c=Lt(t,"tMax",3,10),n=Lt(t,"tStep",3,.1),u=Lt(t,"tUpdate",3,500),o=Lt(t,"simTime",15,0),v=null,i=0,d;const p=4;function m(){v!==null&&(clearInterval(v),v=null)}function j(){d<0&&o()<=0?o(c()):d>0&&o()>=c()?o(0):o(o()+d)}function z(){const J=u()/2**(Math.abs(i)-1);d=i<0?-n():n(),v=setInterval(j,J)}function k(){m(),o(0),i=0}function f(){m(),i=0,d=-n(),j()}function q(){m(),i=0,d=n(),j()}function R(){m(),i=Math.max(i-1,-p),z()}function V(){m(),i=Math.min(i+1,p),z()}function A(){m(),i=0}Ds(()=>{m()});var Q=dl(),lt=s(Q);lt.__click=k;var ct=a(lt,2);ct.__click=R;var ot=a(ct,2);ot.__click=f;var b=a(ot,2);b.__click=A;var U=a(b,2);U.__click=q;var Z=a(U,2);Z.__click=V;var Y=a(Z,2);st(Y);var $=a(Y,2);st($),e(Q),et(()=>{E(Y,"max",c()),E(Y,"step",n()),E($,"max",c()),E($,"step",n())}),_e(Y,o),_e($,o),C(l,Q),gt()}Ft(["click"]);var ml=T('<nav class="svelte-s6zpbt"><button aria-labelledby="zoomInit" class="svelte-s6zpbt"><div class="zero svelte-s6zpbt"></div></button><button aria-labelledby="zoomIn" class="svelte-s6zpbt"><div class="zoomin svelte-s6zpbt"></div></button><button aria-labelledby="zoomOut" class="svelte-s6zpbt"><div class="zoomout svelte-s6zpbt"></div></button><button aria-labelledby="moveLeft" class="svelte-s6zpbt"><div class="arrowleft svelte-s6zpbt"></div></button><button aria-labelledby="moveRight" class="svelte-s6zpbt"><div class="arrowright svelte-s6zpbt"></div></button><button aria-labelledby="moveUp" class="svelte-s6zpbt"><div class="arrowup svelte-s6zpbt"></div></button><button aria-labelledby="moveDown" class="svelte-s6zpbt"><div class="arrowdown svelte-s6zpbt"></div></button></nav>');function bl(l,t){yt(t,!0);var c=ml(),n=s(c);n.__click=()=>t.zoomClick("zoomInit");var u=a(n);u.__click=()=>t.zoomClick("zoomIn");var o=a(u);o.__click=()=>t.zoomClick("zoomOut");var v=a(o);v.__click=()=>t.zoomClick("moveLeft");var i=a(v);i.__click=()=>t.zoomClick("moveRight");var d=a(i);d.__click=()=>t.zoomClick("moveUp");var p=a(d);p.__click=()=>t.zoomClick("moveDown"),e(c),C(l,c),gt()}Ft(["click"]);var I=As(()=>D),_l=T('<div class="svelte-1ehy91m"><label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>main part</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>main skeleton</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>second parts</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>second skeletons</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>dynamics</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>ruler</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>frame of reference</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>points</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>lines</label> <label class="svelte-1ehy91m"><input type="checkbox" class="svelte-1ehy91m"/>vectors</label></div>');function yl(l,t){yt(t,!1),Ss();var c=_l(),n=s(c),u=s(n);st(u),wt(),e(n);var o=a(n,2),v=s(o);st(v),wt(),e(o);var i=a(o,2),d=s(i);st(d),wt(),e(i);var p=a(i,2),m=s(p);st(m),wt(),e(p);var j=a(p,2),z=s(j);st(z),wt(),e(j);var k=a(j,2),f=s(k);st(f),wt(),e(k);var q=a(k,2),R=s(q);st(R),wt(),e(q);var V=a(q,2),A=s(V);st(A),wt(),e(V);var Q=a(V,2),lt=s(Q);st(lt),wt(),e(Q);var ct=a(Q,2),ot=s(ct);st(ot),wt(),e(ct),e(c),St(u,()=>I().dLayers.main,b=>I(I().dLayers.main=b)),St(v,()=>I().dLayers.mainB,b=>I(I().dLayers.mainB=b)),St(d,()=>I().dLayers.second,b=>I(I().dLayers.second=b)),St(m,()=>I().dLayers.secondB,b=>I(I().dLayers.secondB=b)),St(z,()=>I().dLayers.dynamics,b=>I(I().dLayers.dynamics=b)),St(f,()=>I().dLayers.ruler,b=>I(I().dLayers.ruler=b)),St(R,()=>I().dLayers.refframe,b=>I(I().dLayers.refframe=b)),St(A,()=>I().dLayers.points,b=>I(I().dLayers.points=b)),St(lt,()=>I().dLayers.lines,b=>I(I().dLayers.lines=b)),St(ot,()=>I().dLayers.vectors,b=>I(I().dLayers.vectors=b)),C(l,c),gt()}var gl=T('<section class="svelte-k59scj"><!> <div class="rack svelte-k59scj"><canvas class="full svelte-k59scj"></canvas> <!></div> <div class="rack svelte-k59scj"><canvas class="zoom svelte-k59scj"></canvas> <!></div></section>');function hl(l,t){yt(t,!0);let c=Lt(t,"simTime",15,0);const n=400,u=1200;let o=K(n),v,i,d;function p(_,L){if(v){const O=v.getContext("2d");O.clearRect(0,0,O.canvas.width,O.canvas.height);try{d=_.getAdjustFull(O.canvas.width,O.canvas.height),_.draw(O,d,L)}catch(X){console.log(X)}}}function m(_,L,O){if(i){const X=i.getContext("2d");X.clearRect(0,0,X.canvas.width,X.canvas.height);try{(L===void 0||L.init===0)&&(L=_.getAdjustZoom(X.canvas.width,X.canvas.height)),_.draw(X,L,O)}catch(At){console.log(At)}}}function j(){const _=v.getContext("2d"),L=i.getContext("2d"),O=Math.min(Math.max(.4*r(o),n),u);_.canvas.width=O,_.canvas.height=O,L.canvas.width=O,L.canvas.height=O,D.canvasZWidth=O,D.zAdjust.init===0&&(D.zAdjust=t.pFig.getAdjustZoom(L.canvas.width,L.canvas.height))}function z(){j(),p(t.pFig,D.dLayers),m(t.pFig,D.zAdjust,D.dLayers)}function k(_,L,O){p(_,O),m(_,L,O)}ws(()=>{j()}),ka(()=>{k(t.pFig,D.zAdjust,D.dLayers)});function f(_){const L=i.getContext("2d");switch(_){case"zoomInit":D.zAdjust=t.pFig.getAdjustZoom(L.canvas.width,L.canvas.height);break;case"zoomIn":D.zAdjust=na(.7,D.zAdjust);break;case"zoomOut":D.zAdjust=na(1.3,D.zAdjust);break;case"moveLeft":D.zAdjust.xMin+=-.2*D.zAdjust.xyDiff;break;case"moveRight":D.zAdjust.xMin+=.2*D.zAdjust.xyDiff;break;case"moveUp":D.zAdjust.yMin+=.2*D.zAdjust.xyDiff;break;case"moveDown":D.zAdjust.yMin+=-.2*D.zAdjust.xyDiff;break;default:console.log(`ERR423: ${_} has no case!`)}m(t.pFig,D.zAdjust,D.dLayers)}const q=3e3,R=10,V=3;let A={timestamp:0,offsetX:0,offsetY:0};function Q(_){_.button===0&&(A.timestamp=Date.now(),A.offsetX=_.offsetX,A.offsetY=_.offsetY)}function lt(_){if(_.button===0)if(Date.now()-A.timestamp<q){const L=Math.abs(A.offsetX-_.offsetX),O=Math.abs(A.offsetY-_.offsetY);if(L<R&&O<R){const[X,At]=$t(_.offsetX,_.offsetY,d);D.zAdjust=vs(X,At,D.zAdjust),k(t.pFig,D.zAdjust,D.dLayers)}if(L>R&&O>R){const X=L/O,At=1/X;if(X<V&&At<V){const[kt,Tt]=$t(_.offsetX,_.offsetY,d),[qt,It]=$t(A.offsetX,A.offsetY,d),Ct=i.getContext("2d").canvas.width;D.zAdjust=ds(kt,Tt,qt,It,Ct,Ct),k(t.pFig,D.zAdjust,D.dLayers)}}}else console.log(`Warn205: ignore ${_.offsetX} ${_.offsetY} because too slow`)}function ct(_){if(v){const L=v.getContext("2d");if(_.buttons===1){const O=_.offsetX-A.offsetX,X=_.offsetY-A.offsetY;p(t.pFig,D.dLayers),L.beginPath(),L.rect(A.offsetX,A.offsetY,O,X),L.strokeStyle=ma.mouse,L.stroke()}if(D.dLayers.ruler){const[O,X]=$t(_.offsetX,_.offsetY,d);L.clearRect(5,5,200,25),L.font="15px Arial",L.fillStyle=ma.ruler,L.fillText(`x: ${O.toFixed(4)} y: ${X.toFixed(4)}`,5,20)}}}let ot,b,U;function Z(_){if(_.button===0){const[L,O]=$t(_.offsetX,_.offsetY,D.zAdjust);ot=L,b=O,U=fs(D.zAdjust)}}function Y(_){if(_.buttons===1){const[L,O]=$t(_.offsetX,_.offsetY,U);D.zAdjust=ms(ot,b,L,O,U),m(t.pFig,D.zAdjust,D.dLayers)}else if(D.dLayers.ruler&&i){const L=i.getContext("2d"),[O,X]=$t(_.offsetX,_.offsetY,D.zAdjust);L.clearRect(5,5,200,25),L.font="15px Arial",L.fillStyle=ma.ruler,L.fillText(`x: ${O.toFixed(4)} y: ${X.toFixed(4)}`,5,20)}}function $(_){_.preventDefault(),_.deltaY>0?D.zAdjust=na(.7,D.zAdjust):D.zAdjust=na(1.3,D.zAdjust),m(t.pFig,D.zAdjust,D.dLayers)}var J=gl();Na("resize",ns,z);var it=s(J);yl(it,{});var at=a(it,2),G=s(at);E(G,"width",n),E(G,"height",n),G.__mousedown=Q,G.__mouseup=lt,G.__mousemove=ct,ia(G,_=>v=_,()=>v);var ft=a(G,2);fl(ft,{get tMax(){return t.pDefSim.tMax},get tStep(){return t.pDefSim.tStep},get tUpdate(){return t.pDefSim.tUpdate},get simTime(){return c()},set simTime(_){c(_)}}),e(at);var rt=a(at,2),ut=s(rt);E(ut,"width",n),E(ut,"height",n),ut.__mousedown=Z,ut.__mousemove=Y,ia(ut,_=>i=_,()=>i);var Mt=a(ut,2);bl(Mt,{zoomClick:f}),e(rt),e(J),zs("innerWidth",_=>h(o,_,!0)),Na("wheel",ut,$),C(l,J),gt()}Ft(["mousedown","mouseup","mousemove"]);var pl=T("<tr><td> </td><td> </td><td> </td><td><i> </i></td><td><i> </i></td></tr>"),kl=T('<li class="svelte-1quie79"><input type="checkbox" class="toggle svelte-1quie79"/> <label class="label svelte-1quie79"><div class="arrow svelte-1quie79"></div> </label> <button class="svelte-1quie79"> </button> <button class="svelte-1quie79">Export parameters</button> <div class="nested svelte-1quie79"><article class="svelte-1quie79"> <strong> </strong> </article> <table class="svelte-1quie79"><thead class="svelte-1quie79"><tr><td>Num</td><td>Name</td><td>Value</td><td>Init</td><td>Set?</td></tr></thead><tbody class="svelte-1quie79"></tbody></table></div></li>'),xl=T('<section class="svelte-1quie79"><h2 class="svelte-1quie79">Sub-designs <span class="svelte-1quie79"> </span></h2> <ol class="svelte-1quie79"></ol></section>');function Dl(l,t){yt(t,!0);const c=ht(()=>Object.keys(t.subD));async function n(k){const f=t.subD[k];Ya(f.partName,Aa(f.dparam),!0);const q=_s(`/${t.pLink[f.partName]}`);Ha(q)}function u(k){const f=t.subD[k].partName,q=t.subD[k].dparam,R=`sub-design parameters of ${f} from ${t.origPartName}`;Da(f,Aa(q),R)}function o(k){let f="[ ";return f+=`${be(ba(k[0]))}, `,f+=`${be(ba(k[1]))}, `,f+=`${be(ba(k[2]))} ]`,f}function v(k){let f="[ ";return f+=`${be(k[0])}, `,f+=`${be(k[1])}, `,f+=`${be(k[2])} ]`,f}function i(k){return k?"Yes":""}var d=xl(),p=s(d),m=a(s(p)),j=s(m);e(m),e(p);var z=a(p,2);zt(z,20,()=>r(c),k=>k,(k,f)=>{var q=kl(),R=s(q);st(R),bs(R,!1);var V=a(R,2),A=a(s(V));e(V);var Q=a(V,2);Q.__click=()=>n(f);var lt=s(Q);e(Q);var ct=a(Q,2);ct.__click=()=>u(f);var ot=a(ct,2),b=s(ot),U=s(b),Z=a(U),Y=s(Z,!0);e(Z);var $=a(Z);e(b);var J=a(b,2),it=a(s(J));zt(it,22,()=>Object.keys(t.subD[f].dparam),at=>at,(at,G,ft)=>{var rt=pl();let ut;var Mt=s(rt),_=s(Mt,!0);e(Mt);var L=a(Mt),O=s(L,!0);e(L);var X=a(L),At=s(X,!0);e(X);var kt=a(X),Tt=s(kt),qt=s(Tt,!0);e(Tt),e(kt);var It=a(kt),Rt=s(It),Ct=s(Rt,!0);e(Rt),e(It),e(rt),et(ae=>{ut=pt(rt,1,"svelte-1quie79",null,ut,{changed:t.subD[f].dparam[G].chg}),w(_,r(ft)+1),w(O,G),w(At,t.subD[f].dparam[G].val),w(qt,t.subD[f].dparam[G].init),w(Ct,ae)},[()=>i(t.subD[f].dparam[G].chg)]),C(at,rt)}),e(it),e(J),e(ot),e(q),et((at,G,ft)=>{E(R,"id",`cb_${f??""}`),E(V,"for",`cb_${f??""}`),w(A,` ${f??""}`),w(lt,`Go to ${t.pLink[t.subD[f].partName]??""}`),w(U,`${at??""} parameters of `),w(Y,t.subD[f].partName),w($,` with orientation ${G??""} (degree) at position
						${ft??""} (mm)`)},[()=>Object.keys(t.subD[f].dparam).length,()=>o(t.subD[f].orientation),()=>v(t.subD[f].position)]),C(k,q)}),e(z),e(d),et(()=>w(j,`(Number of sub-instances: ${r(c).length??""})`)),C(l,d),gt()}Ft(["click"]);var wl=T("<button> </button>"),Sl=T('<tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">2d- svg</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr>'),jl=T('<tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">2d- dxf</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr>'),Ll=T('<!> <section class="svelte-ayb2uc"><h2 class="svelte-ayb2uc">Log</h2> <textarea rows="5" cols="94" readonly="" wrap="soft"></textarea></section> <section class="svelte-ayb2uc"><h2 class="svelte-ayb2uc">2D Drawings : <!> <button>All faces merged</button></h2></section> <!> <section class="svelte-ayb2uc"><h2 class="svelte-ayb2uc">Export</h2> <table class="svelte-ayb2uc"><caption class="svelte-ayb2uc">Output files</caption><thead class="svelte-ayb2uc"><tr class="svelte-ayb2uc"><th class="svelte-ayb2uc">#</th><th class="svelte-ayb2uc">Filename</th><th class="svelte-ayb2uc">Type</th><th class="svelte-ayb2uc">Preview</th><th class="svelte-ayb2uc">Download</th></tr></thead><tbody class="svelte-ayb2uc"><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc">1</td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">0-params- pxJson</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc">2</td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">1-log- txtLog</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><!><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">2d- svg</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><!><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">2d- dxf</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">4-pax- paxJson</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">5-script- scad</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">5-script- jsCad</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">5-script- pyFreecad</td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">preview</button></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr><tr class="svelte-ayb2uc"><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc"> </td><td class="svelte-ayb2uc">6-zip- zip</td><td class="svelte-ayb2uc"></td><td class="svelte-ayb2uc"><button class="svelte-ayb2uc">download</button></td></tr></tbody></table> <dialog id="dBview" class="svelte-ayb2uc"><textarea readonly="" wrap="soft" class="svelte-ayb2uc"></textarea> <button class="bback svelte-ayb2uc">close - back - escape</button></dialog> <!></section>',1);function Nl(l,t){yt(t,!0);const c="ParametrixAll";function n(x){let P=!0;const F=/warn/i;return x.search(F)<0&&(P=!1),P}function u(x,P){let F=P;if(x.length===0)console.log("warn404: Drawing has an empty face list");else{const S=x.slice();S.push(c),S.includes(F)||(F=x[0])}return F}function o(x,P){let F;const S=Object.keys(x),B=u(S,P);return S.includes(B)?F=x[B]:F=ps(x),F}let v=K(0),i=K(c);Ra(()=>{h(i,u(Object.keys(t.fgeom(0,H[t.pDef.partName]).fig),""),!0)});let d=ht(()=>t.fgeom(r(v),H[t.pDef.partName])),p=ht(()=>{const x=new Date().toLocaleTimeString();let P=`Geometry ${t.pDef.partName} computed at ${x}
`;return P+=r(d).logstr,P}),m=ht(()=>Object.keys(r(d).fig)),j=ht(()=>r(d).calcErr),z=ht(()=>n(r(d).logstr)),k=ht(()=>o(r(d).fig,r(i))),f=ht(()=>r(d).sub);function q(x,P){const F=document.createElement("a"),S=URL.createObjectURL(P);F.setAttribute("href",S),F.setAttribute("download",x),F.click(),F.remove(),URL.revokeObjectURL(S)}function R(x,P,F){const S=document.createElement("a"),B="data:"+F+";utf-8,"+encodeURIComponent(P);S.setAttribute("href",B),S.setAttribute("download",x),S.click(),S.remove()}function V(){const x=/[-:]/g,P=/\..*$/;return new Date().toISOString().replace(x,"").replace(P,"").replace("T","_")}async function A(x){const P=/^svg_/,F=/^dxf_/;let S=nt.eSVG,B="all";x.match(P)?(S=nt.eSVG,B=x.replace(P,"")):x.match(F)?(S=nt.eDXF,B=x.replace(F,"")):x==="allsvg"?S=nt.eSVGALL:x==="alldxf"?S=nt.eDXFALL:x==="compute_log"?S=nt.eTXTLOG:x==="pax"?S=nt.ePAX:x==="oscad"?S=nt.eOPENSCAD:x==="ojscad"?S=nt.eJSCAD:x==="freecad"?S=nt.eFREECAD:x==="zip"?S=nt.eZIP:console.log(`err883: downloadExport iExportFace ${x} invalid`);const Ot=gs(S),bt=ks(S),Dt=hs(S),dt=t.pDef.partName+"_"+B+"_"+V()+Ot;if(Dt){const Pt=await ys(t.fgeom,r(v),H[t.pDef.partName],t.pDef,S);q(dt,Pt)}else{const Pt=Ca(t.fgeom,H[t.pDef.partName],t.pDef,B,S);R(dt,Pt,bt)}}async function Q(){Da(t.pDef.partName,H[t.pDef.partName],"")}let lt,ct=K("");function ot(x){h(ct,x,!0),lt.showModal()}function b(x,P){ot(Ca(t.fgeom,H[t.pDef.partName],t.pDef,x,P))}function U(){lt.close()}var Z=Ll(),Y=jt(Z);vl(Y,{get pDef(){return t.pDef},get pFig(){return r(k)}});var $=a(Y,2),J=a(s($),2);ga(J);let it;e($);var at=a($,2),G=s(at),ft=a(s(G));zt(ft,16,()=>r(m),x=>x,(x,P)=>{var F=wl();F.__click=()=>{h(i,P,!0)};var S=s(F,!0);e(F),et(()=>{pt(F,1,Pa({theFace:r(i)===P}),"svelte-ayb2uc"),w(S,P)}),C(x,F)});var rt=a(ft,2);rt.__click=()=>{h(i,c)},e(G),e(at);var ut=a(at,2);hl(ut,{get pDefSim(){return t.pDef.sim},get pFig(){return r(k)},get simTime(){return r(v)},set simTime(x){h(v,x,!0)}});var Mt=a(ut,2),_=a(s(Mt),2),L=a(s(_),2),O=s(L),X=a(s(O)),At=s(X);e(X);var kt=a(X,2),Tt=s(kt);Tt.__click=()=>{ot(Hs(t.pDef.partName,H[t.pDef.partName],""))},e(kt);var qt=a(kt),It=s(qt);It.__click=Q,e(qt),e(O);var Rt=a(O),Ct=a(s(Rt)),ae=s(Ct);e(Ct);var Wt=a(Ct,2),Ze=s(Wt);Ze.__click=()=>{b("all",nt.eTXTLOG)},e(Wt);var se=a(Wt),ye=s(se);ye.__click=async()=>{await A("compute_log")},e(se),e(Rt);var ge=a(Rt);zt(ge,18,()=>r(m),x=>x,(x,P,F)=>{var S=Sl(),B=s(S),Ot=s(B,!0);e(B);var bt=a(B),Dt=s(bt);e(bt);var dt=a(bt,2),Pt=s(dt);Pt.__click=()=>{b(P,nt.eSVG)},e(dt);var Ut=a(dt),_t=s(Ut);_t.__click=async()=>{await A(`svg_${P}`)},e(Ut),e(S),et(()=>{w(Ot,3+r(F)),w(Dt,`${t.pDef.partName??""}_${P??""}.svg`)}),C(x,S)});var Bt=a(ge),le=s(Bt),Ke=s(le,!0);e(le);var he=a(le),Ge=s(he);e(he);var re=a(he,2),Be=s(re);Be.__click=()=>{b("all",nt.eSVGALL)},e(re);var pe=a(re),ua=s(pe);ua.__click=async()=>{await A("allsvg")},e(pe),e(Bt);var ke=a(Bt);zt(ke,18,()=>r(m),x=>x,(x,P,F)=>{var S=jl(),B=s(S),Ot=s(B,!0);e(B);var bt=a(B),Dt=s(bt);e(bt);var dt=a(bt,2),Pt=s(dt);Pt.__click=()=>{b(P,nt.eDXF)},e(dt);var Ut=a(dt),_t=s(Ut);_t.__click=async()=>{await A(`dxf_${P}`)},e(Ut),e(S),et(()=>{w(Ot,4+r(m).length+r(F)),w(Dt,`${t.pDef.partName??""}_${P??""}.dxf`)}),C(x,S)});var xe=a(ke),Ht=s(xe),De=s(Ht,!0);e(Ht);var ne=a(Ht),He=s(ne);e(ne);var ce=a(ne,2),Je=s(ce);Je.__click=()=>{b("all",nt.eDXFALL)},e(ce);var Qe=a(ce),$e=s(Qe);$e.__click=async()=>{await A("alldxf")},e(Qe),e(xe);var Yt=a(xe),oe=s(Yt),we=s(oe,!0);e(oe);var Se=a(oe),ta=s(Se);e(Se);var je=a(Se,2),y=s(je);y.__click=()=>{b("all",nt.ePAX)},e(je);var g=a(je),N=s(g);N.__click=async()=>{await A("pax")},e(g),e(Yt);var M=a(Yt),tt=s(M),vt=s(tt,!0);e(tt);var Nt=a(tt),ie=s(Nt);e(Nt);var xt=a(Nt,2),Le=s(xt);Le.__click=()=>{b("all",nt.eOPENSCAD)},e(xt);var Et=a(xt),Ne=s(Et);Ne.__click=async()=>{await A("oscad")},e(Et),e(M);var mt=a(M),Jt=s(mt),ea=s(Jt,!0);e(Jt);var Xt=a(Jt),W=s(Xt);e(Xt);var ze=a(Xt,2),ue=s(ze);ue.__click=()=>{b("all",nt.eJSCAD)},e(ze);var Ae=a(ze),Ce=s(Ae);Ce.__click=async()=>{await A("ojscad")},e(Ae),e(mt);var Oe=a(mt),Qt=s(Oe),Pe=s(Qt,!0);e(Qt);var Fe=a(Qt),Me=s(Fe);e(Fe);var Te=a(Fe,2),va=s(Te);va.__click=()=>{b("all",nt.eFREECAD)},e(Te);var aa=a(Te),ve=s(aa);ve.__click=async()=>{await A("freecad")},e(aa),e(Oe);var Re=a(Oe),Ue=s(Re),de=s(Ue,!0);e(Ue);var fe=a(Ue),da=s(fe);e(fe);var me=a(fe,3),fa=s(me);fa.__click=async()=>{await A("zip")},e(me),e(Re),e(L),e(_);var Vt=a(_,2),qe=s(Vt);ga(qe);var Ie=a(qe,2);Ie.__click=U,e(Vt),ia(Vt,x=>lt=x,()=>lt);var sa=a(Vt,2);Dl(sa,{get subD(){return r(f)},get origPartName(){return t.pDef.partName},get pLink(){return t.pLink}}),e(Mt),et(()=>{oa(J,r(p)),it=pt(J,1,"svelte-ayb2uc",null,it,{colorErr:r(j),colorWarn:r(z)}),pt(rt,1,Pa({theFace:r(i)===c}),"svelte-ayb2uc"),w(At,`px_${t.pDef.partName??""}.json`),w(ae,`${t.pDef.partName??""}_all.log`),w(Ke,3+r(m).length),w(Ge,`${t.pDef.partName??""}_all.svg`),w(De,4+2*r(m).length),w(He,`${t.pDef.partName??""}_all.dxf`),w(we,5+2*r(m).length),w(ta,`${t.pDef.partName??""}_all.pax.json`),w(vt,6+2*r(m).length),w(ie,`${t.pDef.partName??""}_all_noarc_openscad.scad`),w(ea,7+2*r(m).length),w(W,`${t.pDef.partName??""}_all_noarc_jscad.js`),w(Pe,8+2*r(m).length),w(Me,`${t.pDef.partName??""}_all_freecad.py`),w(de,9+2*r(m).length),w(da,`${t.pDef.partName??""}_all.zip`),oa(qe,r(ct))}),C(l,Z),gt()}Ft(["click"]);var zl=T('<h1 class="svelte-rl9kfz"> </h1> <article class="svelte-rl9kfz"> </article> <!> <!>',1);function Al(l,t){yt(t,!0),Ps(t.pageDef);var c=zl(),n=jt(c),u=s(n,!0);e(n);var o=a(n,2),v=s(o);e(o);var i=a(o,2);Rs(i,{get pDef(){return t.pageDef.pDef}});var d=a(i,2);Nl(d,{get pDef(){return t.pageDef.pDef},get fgeom(){return t.pageDef.pGeom},get pLink(){return t.pLink}}),et(()=>{w(u,t.pageDef.pTitle),w(v,`[${t.pageDef.pDef.partName??""}]: ${t.pageDef.pDescription??""}`)}),C(l,c),gt()}function Wl(l,t){yt(t,!0),Al(l,{get pageDef(){return t.data.pageDef},get pLink(){return t.data.allLink}}),gt()}export{Wl as component,Xl as universal};
