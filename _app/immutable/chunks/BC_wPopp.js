import{p as d,a as A,b as $t,c as ee,i as Do,d as D,f as l,g as R,E as qt,h as v,j as f,k as xs,l as g,r as Cn,m as Co}from"./CYBeyg6A.js";var yd={partName:"catamaran",params:[d("W1","mm",200,10,1e3,1),d("W2","mm",100,10,1e3,1),d("W3p","%",10,1,99,1),d("L1","mm",300,1,1e3,1),d("L2","mm",150,1,1e3,1),d("L3","mm",200,1,1e3,1),$t("others"),d("H1","mm",120,1,1e3,1),d("H2","mm",40,1,1e3,1),d("H3","mm",100,1,1e3,1),d("T1","mm",2,.1,20,.1),d("T2","mm",5,.1,30,.1),d("R21","mm",1,0,500,1),d("R22","mm",3,0,500,1),$t("details"),d("D1","mm",50,1,500,1),d("D4","mm",40,1,500,1),d("L4","mm",40,1,500,1)],paramSvg:{W1:"catamaran_top.svg",W2:"catamaran_top.svg",W3p:"catamaran_top.svg",L1:"catamaran_top.svg",L2:"catamaran_top.svg",L3:"catamaran_top.svg",H1:"catamaran_side.svg",H2:"catamaran_side.svg",H3:"catamaran_side.svg",T1:"catamaran_front.svg",T2:"catamaran_top.svg",R21:"catamaran_top.svg",R22:"catamaran_top.svg",D1:"catamaran_front.svg",D4:"catamaran_top.svg",L4:"catamaran_top.svg"},sim:{tMax:180,tStep:.5,tUpdate:500}};function Ns(it,t,at=""){const S=Do(yd.partName+at),y=R(),N=R(),u=R(),E=R(),Pt=R(),vt=R();S.logstr+=`${S.partName} simTime: ${it}
`;try{let et=function(x,M,$,K,ct,Mt,At){const Et=$*ct,Zt=$-Et;return D(x,M).addPointR(Et,-Mt).addSegArc3(-J,!0).addCornerRounded(At).addPointR(Zt,Mt).addSegArc3(-J,!1).addSegStrokeR(0,K).addPointR(-Zt,Mt).addSegArc3(J,!0).addCornerRounded(At).addPointR(-Et,-Mt).addSegArc3(J,!1).closeSegStroke()},B=function(x,M,$,K){return D(x,M).addSegStrokeR($,0).addSegStrokeR(0,K).addSegStrokeR(-H,0).addSegStrokeR(0,-K+H).addSegStrokeR(-$+2*H,0).addSegStrokeR(0,K-H).addSegStrokeR(-H,0).closeSegStroke()},_t=function(x,M){return D(x,t.H1).addSegStrokeR(M*H,0).addSegStrokeR(0,t.H2-Rt).addSegStrokeRP(J-M*wt,zt-Rt).addSegStrokeRP(J-M*(wt-J),H).addSegStrokeRP(J-M*(wt+Lt),zt).closeSegStroke()},Wt=function(x,M){return D(x,t.H1-O).addPointR(M*O,O).addSegArc(O,!1,M<0).addSegStrokeR(0,H).addSegStrokeR(-M*(H+O),0).addSegStrokeR(0,-H-O).closeSegStroke()};var We=et,Ze=B,pe=_t,ft=Wt;const Lt=Math.PI,J=Lt/2,C=t.W1+2*t.W2,L=t.L1+2*t.L2,O=t.D1/2,Z=t.D4/2,ot=t.W3p/100,H=t.T1,Gt=t.T2,oe=t.L1,Vt=t.L2,w=t.L3,Ct=t.W1,nt=t.W2,Re=nt-2*H,ne=L+2*w,Me=Math.atan2(t.H3,Vt),wt=J-Me,xe=wt/2,Rt=H*Math.tan(xe),zt=Math.sqrt(Vt**2+t.H3**2);if(t.L4<Z)throw`err089: L4 ${t.L4} is too small compare to D4 ${t.D4}`;if(Ct<2*(O+Z))throw`err109: W1 ${Ct} is too small compare to D1 ${t.D1} and D4 ${t.D4}`;S.logstr+=`cabine surface ${g(C*L)} mm2
`,S.logstr+=`float length ${g(ne)}, width W212 ${g(C)} mm
`;const Ne=et(0,w,nt,L,1-ot,w,t.R21),de=et(H,w,Re,L,1-ot,w-Gt,t.R22),jt=et(nt+Ct,w,nt,L,ot,w,t.R21),Dt=et(nt+Ct+H,w,Re,L,ot,w-Gt,t.R22);N.addMainOI([Ne,de]),N.addMainOI([jt,Dt]),y.addMainO(Ne),y.addMainO(jt);const r=f(0,t.L3,C,L),b=l(C/2,w+H+t.L4,Z);u.addMainOI([r,b]),u.mergeFigure(N,!0),u.addSecond(f(nt,t.L3,O,L)),u.addSecond(f(nt+Ct-O,t.L3,O,L)),N.addSecond(r),N.addSecond(b),y.addSecond(r),y.addSecond(b);const W=D(w,t.H1).addSegStrokeR(L,0).addSegStrokeR(0,t.H2).addSegStrokeR(-Vt,t.H3).addSegStrokeR(-oe,0).addSegStrokeR(-Vt,-t.H3).closeSegStroke();E.addMainO(W),E.addSecond(f(0,0,ne,t.H1)),E.addSecond(f(w,t.H1-O,L,O)),E.addSecond(f(w,t.H1,L,H)),Pt.addMainO(_t(w,1)),Pt.addMainO(_t(w+L,-1)),Pt.mergeFigure(E,!0),vt.addMainO(Wt(nt,1)),vt.addMainO(Wt(nt+Ct,-1)),vt.addSecond(B(0,0,nt,t.H1)),vt.addSecond(B(nt+Ct,0,nt,t.H1)),vt.addSecond(B(0,t.H1,C,t.H2+t.H3)),S.fig={faceFloatWall:N,faceFloatBase:y,faceCabineBase:u,faceCabineWall:E,faceCabineEnv:Pt,faceVault:vt};const a=S.partName;S.vol={extrudes:[{outName:`subpax_${a}_floatB`,face:`${a}_faceFloatBase`,extrudeMethod:v.eLinearOrtho,length:H,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${a}_floatW`,face:`${a}_faceFloatWall`,extrudeMethod:v.eLinearOrtho,length:t.H1,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${a}_cabineB`,face:`${a}_faceCabineBase`,extrudeMethod:v.eLinearOrtho,length:H,rotate:[0,0,0],translate:[0,0,t.H1]},{outName:`subpax_${a}_cabineW1`,face:`${a}_faceCabineWall`,extrudeMethod:v.eLinearOrtho,length:H,rotate:[J,0,J],translate:[0,0,0]},{outName:`subpax_${a}_cabineW2`,face:`${a}_faceCabineWall`,extrudeMethod:v.eLinearOrtho,length:H,rotate:[J,0,J],translate:[C-H,0,0]},{outName:`subpax_${a}_cabineEnv`,face:`${a}_faceCabineEnv`,extrudeMethod:v.eLinearOrtho,length:C,rotate:[J,0,J],translate:[0,0,0]},{outName:`subpax_${a}_vault`,face:`${a}_faceVault`,extrudeMethod:v.eLinearOrtho,length:L,rotate:[J,0,0],translate:[0,L+w,0]}],volumes:[{outName:`pax_${a}`,boolMethod:qt.eUnion,inList:[`subpax_${a}_floatB`,`subpax_${a}_floatW`,`subpax_${a}_cabineB`,`subpax_${a}_cabineW1`,`subpax_${a}_cabineW2`,`subpax_${a}_cabineEnv`,`subpax_${a}_vault`]}]},S.sub={},S.logstr+=`catamaran drawn successfully!
`,S.calcErr=!1}catch(et){S.logstr+=et,console.log(et)}return S}var Hs={pTitle:"catamaran",pDescription:"model of catamaran boat",pDef:yd,pGeom:Ns},Id={partName:"voila",params:[d("H1","mm",40,1,4e3,1),d("H2","mm",50,1,4e3,1),d("radius","mm",10,1,4e3,1),$t("corners"),d("Rc","mm",10,0,400,1)],paramSvg:{H1:"voila_face.svg",H2:"voila_face.svg",radius:"voila_face.svg",Rc:"voila_face.svg"},sim:{tMax:180,tStep:.5,tUpdate:500}};function $s(it,t,at=""){const S=Do(Id.partName+at),y=R();S.logstr+=`${S.partName} simTime: ${it}
`;try{const N=[],u=D(-t.H1/2,-t.H2/2).addCornerRounded(t.Rc).addSegStrokeA(t.H1/2,-t.H2/2).addSegStrokeA(t.H1/2,t.H2/2).addCornerRounded(t.Rc).addSegStrokeA(-t.H1/2,t.H2/2).closeSegStroke();N.push(u),N.push(l(0,0,t.radius)),y.addMainOI(N),S.fig={faceVoila:y};const E=S.partName;S.vol={extrudes:[{outName:`subpax_${E}_top`,face:`${E}_faceVoila`,extrudeMethod:v.eLinearOrtho,length:10,rotate:[0,0,0],translate:[0,0,0]}],volumes:[{outName:`pax_${E}`,boolMethod:qt.eIdentity,inList:[`subpax_${E}_top`]}]},S.sub={},S.logstr+=`voila drawn successfully!
`,S.calcErr=!1}catch(N){S.logstr+=N,console.log(N)}return S}var vs={pTitle:"voila",pDescription:"A simple design for testing exports",pDef:Id,pGeom:$s},Qd={partName:"abri",params:[d("Nb1","poleTriangles",3,2,20,1),d("Lb","mm",3e3,10,1e4,1),d("La","mm",3e3,10,1e4,1),A("SecondPoleNorth",!1),d("KaNorth","mm",1e3,10,1e4,1),d("JaNorth","mm",1e3,10,1e4,1),A("SecondPoleSouth",!1),d("KaSouth","mm",1e3,10,1e4,1),d("JaSouth","mm",1e3,10,1e4,1),$t("West East Sides"),d("Ra","degree",30,10,80,.5),d("Rt","%",50,0,100,1),d("ReS","mm",500,1,5e3,1),d("ReN","mm",500,1,5e3,1),d("H1","mm",2500,10,5e3,1),d("H2","mm",300,10,1e3,1),d("H3","mm",300,10,1e3,1),A("bSplit",!1),A("aSplit",!1),d("H3s","mm",300,10,1e3,1),d("H3arc","mm",0,0,2e3,1),$t("plank-1"),d("W1a","mm",300,10,1e3,1),d("W1b","mm",300,10,1e3,1),d("V1","mm",40,0,1e3,1),d("U1","mm",40,0,1e3,1),d("W2","mm",150,5,1e3,1),d("W3","mm",150,5,1e3,1),d("D2","mm",20,0,200,1),d("D3","mm",20,0,200,1),$t("plank-4 plank-7"),d("W4","mm",200,1,1e3,1),d("B4","mm",100,0,1e3,1),d("D4","mm",20,0,200,1),d("P41","mm",20,0,200,1),d("P42","mm",20,0,200,1),d("S4","mm",60,0,200,1),d("S4e","mm",0,0,20,.1),d("S4e2","mm",0,0,20,.1),d("Q4","mm",500,0,2e3,1),d("Q4Init","mm",50,0,2e3,1),d("dropLastN","notch",0,0,10,1),d("dropLastS","notch",0,0,10,1),d("H7","mm",60,0,200,1),$t("plank-5 plank-8"),d("W5a","mm",200,1,1e3,1),d("W5bs","mm",0,0,1e3,1),d("D5","mm",20,0,200,1),ee("top_opt",["shifted","aligned"]),d("G5Min","mm",200,1,1e3,1),d("P5","mm",20,1,200,1),d("W8","mm",200,1,1e3,1),$t("plank-6"),d("W6","mm",100,1,1e3,1),d("H6","mm",100,1,1e3,1),ee("peak6",["peak","square"]),$t("Diagonals"),d("dbW","mm",100,1,500,1),d("dbX","mm",500,1,2e3,1),d("dbY","mm",1e3,1,2e3,1),d("dbP","mm",50,1,200,1),d("dbPe","mm",0,0,20,.1),d("dbD","mm",20,1,200,1),d("dbE","mm",50,1,500,1),d("daW","mm",100,1,500,1),d("daX","mm",500,1,2e3,1),d("daY","mm",1e3,1,2e3,1),d("daP","mm",50,1,200,1),d("daPe","mm",0,0,20,.1),d("daD","mm",20,1,200,1),d("daE","mm",50,1,500,1),d("dtW","mm",100,1,500,1),d("dtX","mm",1e3,1,2e3,1),d("dtY","mm",1e3,1,2e3,1),d("dtP","mm",50,1,200,1),d("dtPe","mm",0,0,20,.1),d("dtQ","mm",20,1,200,1),d("dtQe","mm",0,0,20,.1),d("dtF","mm",800,1,4e3,1),$t("3D Export"),A("d3Plank1",!1),ee("d3Plank1West",["Low","High","End"]),ee("d3Plank1East",["Low","High","End"]),ee("d3Plank1SN",["P1","P2","P3","P4"]),A("d3Plank2EE",!1),A("d3Plank2Slot",!1),A("d3Plank2Short",!1),A("d3Plank3EE",!1),A("d3Plank3S",!1),A("d3Plank3M",!1),A("d3Plank3N",!1),A("d3Plank4S",!1),A("d3Plank4N",!1),A("d3Plank5",!1),A("d3Plank6",!1),A("d3Plank7",!1),A("d3Plank8S",!1),A("d3Plank8N",!1),A("d3PlankDiagTop",!1),A("d3PlankDiagA",!1),A("d3PlankDiagB",!1),A("d3Assembly",!0)],paramSvg:{Nb1:"abri_base.svg",Lb:"abri_base.svg",La:"abri_base.svg",SecondPoleNorth:"abri_base.svg",KaNorth:"abri_base.svg",SecondPoleSouth:"abri_base.svg",KaSouth:"abri_base.svg",JaNorth:"abri_base.svg",JaSouth:"abri_base.svg",Ra:"abri_triangle.svg",Rt:"abri_triangle.svg",ReS:"abri_triangle.svg",ReN:"abri_plank4.svg",H1:"abri_beam_heights.svg",H2:"abri_beam_heights.svg",H3:"abri_south_bSplit_off.svg",bSplit:"abri_south_bSplit.svg",aSplit:"abri_east_P1234.svg",H3s:"abri_south_P2P3.svg",H3arc:"abri_beam_heights.svg",W1a:"abri_base.svg",W1b:"abri_base.svg",V1:"abri_base.svg",U1:"abri_base.svg",W2:"abri_base.svg",W3:"abri_base.svg",D2:"abri_base.svg",D3:"abri_base.svg",W4:"abri_plank4.svg",B4:"abri_triangle.svg",D4:"abri_plank4.svg",P41:"abri_plank4.svg",P42:"abri_plank4.svg",S4:"abri_plank4.svg",S4e:"abri_notch.svg",S4e2:"abri_plank4.svg",Q4:"abri_plank4.svg",Q4Init:"abri_plank4.svg",dropLastN:"abri_top_opt_shifted.svg",dropLastS:"abri_top_opt_aligned.svg",H7:"abri_triangle.svg",W5a:"abri_triangle.svg",W5bs:"abri_plank5b.svg",D5:"abri_triangle.svg",top_opt:"abri_top_opt_shifted.svg",G5Min:"abri_triangle.svg",P5:"abri_plank8.svg",W8:"abri_triangle.svg",W6:"abri_top_opt_aligned.svg",H6:"abri_triangle.svg",peak6:"abri_triangle.svg",dbW:"abri_diagonal_b.svg",dbX:"abri_diagonal_b.svg",dbY:"abri_diagonal_b.svg",dbP:"abri_diagonal_b.svg",dbPe:"abri_diagonal_b.svg",dbD:"abri_diagonal_b.svg",dbE:"abri_diagonal_b.svg",daW:"abri_diagonal_a.svg",daX:"abri_diagonal_a.svg",daY:"abri_diagonal_a.svg",daP:"abri_diagonal_a.svg",daPe:"abri_diagonal_a.svg",daD:"abri_diagonal_a.svg",daE:"abri_diagonal_a.svg",dtW:"abri_diagonal_top.svg",dtX:"abri_diagonal_top.svg",dtY:"abri_diagonal_top.svg",dtP:"abri_diagonal_top.svg",dtPe:"abri_diagonal_top.svg",dtQ:"abri_diagonal_top.svg",dtQe:"abri_diagonal_top.svg",dtF:"abri_base.svg",d3Plank1:"abri_3d_export.svg",d3Plank1West:"abri_south_P2P3.svg",d3Plank1East:"abri_south_P2P3.svg",d3Plank1SN:"abri_east_P1234.svg",d3Plank2EE:"abri_3d_export.svg",d3Plank2Slot:"abri_3d_export.svg",d3Plank2Short:"abri_3d_export.svg",d3Plank3One:"abri_3d_export.svg",d3Plank3S:"abri_3d_export.svg",d3Plank3M:"abri_3d_export.svg",d3Plank3N:"abri_3d_export.svg",d3Plank4S:"abri_3d_export.svg",d3Plank4N:"abri_3d_export.svg",d3Plank5:"abri_3d_export.svg",d3Plank6:"abri_3d_export.svg",d3Plank7:"abri_3d_export.svg",d3Plank8S:"abri_3d_export.svg",d3Plank8N:"abri_3d_export.svg",d3PlankDiagTop:"abri_3d_export.svg",d3PlankDiagA:"abri_3d_export.svg",d3PlankDiagB:"abri_3d_export.svg",d3Assembly:"abri_3d_export.svg"},sim:{tMax:180,tStep:.5,tUpdate:500}};function Ls(it,t,at=""){const S=Do(Qd.partName+at),y=R(),N=R(),u=R(),E=R(),Pt=R(),vt=R(),We=R(),Ze=R(),pe=R(),ft=R(),et=R(),B=R(),_t=R(),Wt=R(),Lt=R(),J=R(),C=R(),L=R(),O=R(),Z=R(),ot=R(),H=R(),Gt=R(),oe=R();S.logstr+=`${S.partName} simTime: ${it}
`;try{let Yt=function(e){return i+Q/Math.cos(e-_)+i/Math.tan(e)},Eo=function(e,o,n){const c=(n===2||n===3)&&t.aSplit===1?t.H3s:0,P=t.bSplit===1?t.H2:0,F=Bd+P;let T=n===4?2:0,U=n===1?2:0;t.aSplit===1&&n===2&&(T=1),t.aSplit===1&&n===3&&(U=1);const j=t.H2+P,st=j+(t.aSplit===1?t.H3:0),ht=t.daY+Ho-Hd-j,m=t.daY+Ho-Hd-st,St=$d+Nd,Ht=t.H1-St-ht,tt=t.H1-St-m,kt=D(e,o);return T===2?kt.addSegStrokeR(t.H1,0):T===1?kt.addSegStrokeR(tt,0).addSegStrokeR(0,t.daP).addSegStrokeR(St,0).addSegStrokeR(0,-t.daP).addSegStrokeR(m,0):kt.addSegStrokeR(Ht,0).addSegStrokeR(0,t.daP).addSegStrokeR(St,0).addSegStrokeR(0,-t.daP).addSegStrokeR(ht,0),kt.addSegStrokeR(0,t.V1).addSegStrokeR(F+c,0).addSegStrokeR(0,$e).addSegStrokeR(-F-c,0).addSegStrokeR(0,t.V1),U===2?kt.addSegStrokeR(-t.H1,0):U===1?kt.addSegStrokeR(-m,0).addSegStrokeR(0,-t.daP).addSegStrokeR(-St,0).addSegStrokeR(0,t.daP).addSegStrokeR(-tt,0):kt.addSegStrokeR(-ht,0).addSegStrokeR(0,-t.daP).addSegStrokeR(-St,0).addSegStrokeR(0,t.daP).addSegStrokeR(-Ht,0),kt.closeSegStroke(),kt},Dn=function(e,o,n){return Eo(e,o-t.W1a,n).rotate(e,o,_)},Oo=function(e,o,n,c,P){const F=(P===2||P===3)&&t.aSplit===1?t.H3s:0,T=t.H3+F,U=t.bSplit===1?t.H2:0,j=ut+U,st=t.dbY+$o-Ld+t.H2+U,ht=t.dbY+$o-Ld+U,m=Cd+vd,St=j-m-st,Ht=j-m-ht,tt=D(e,o);return c===2?tt.addSegStrokeR(j,0):c===1?tt.addSegStrokeR(Ht,0).addSegStrokeR(0,t.dbP).addSegStrokeR(m,0).addSegStrokeR(0,-t.dbP).addSegStrokeR(ht,0):tt.addSegStrokeR(St,0).addSegStrokeR(0,t.dbP).addSegStrokeR(m,0).addSegStrokeR(0,-t.dbP).addSegStrokeR(st,0),tt.addSegStrokeR(0,t.U1).addSegStrokeR(T,0).addSegStrokeR(0,no).addSegStrokeR(-T,0).addSegStrokeR(0,t.U1),n===2?tt.addSegStrokeR(-j,0):n===1?tt.addSegStrokeR(-ht,0).addSegStrokeR(0,-t.dbP).addSegStrokeR(-m,0).addSegStrokeR(0,t.dbP).addSegStrokeR(-Ht,0):tt.addSegStrokeR(-st,0).addSegStrokeR(0,-t.dbP).addSegStrokeR(-m,0).addSegStrokeR(0,t.dbP).addSegStrokeR(-St,0),tt.closeSegStroke(),tt},En=function(e,o,n,c,P){return Oo(e,o-t.W1b,n,c,P).rotate(e,o,_)},yo=function(e,o){return f(e,o,So,t.H2)},oo=function(e,o){return f(e,o,t.Lb+2*(t.W1b+X),t.H2)},On=function(e,o){return f(e,o,t.W1b+2*X,t.H2)},Io=function(e,o){let n=D(e,o).addSegStrokeR(le,0).addSegStrokeR(0,t.H3-ke).addSegStrokeR(-mt,ke).addSegStrokeR(-le+mt+te,0).addSegStrokeR(-te,-bn).closeSegStroke();if(t.H3arc>0){const c=t.JaSouth+t.W1a+Te+t.W2-t.V1,P=t.JaNorth+t.W1a+ko+t.W2-t.V1;n=D(e,o).addSegStrokeR(c,0).addPointR(bo,t.H3arc).addSegArc3(G,!1).addPointR(Po,-t.H3arc).addSegArc3(0,!0).addSegStrokeR(P,0).addSegStrokeR(0,t.H3s-ke).addSegStrokeR(-mt,ke).addSegStrokeR(-P+t.W2+mt,0).addPointR(-Po-t.W2,t.H3arc).addSegArc3(0,!1).addPointR(-bo-t.W2,-t.H3arc).addSegArc3(G,!0).addSegStrokeR(-c+t.W2+te,0).addSegStrokeR(-te,-bn).closeSegStroke()}return n},Qo=function(e,o){return D(e,o).addSegStrokeR(Pd,0).addSegStrokeR(0,t.H3).addSegStrokeR(-Pd+te,0).addSegStrokeR(-te,-bn).closeSegStroke()},Ao=function(e,o){let n=f(e,o,gs,t.H3s);return t.H3arc>0&&(n=D(e,o).addSegStrokeR(uo,0).addPointR(bo,t.H3arc).addSegArc3(G,!1).addPointR(Po,-t.H3arc).addSegArc3(0,!0).addSegStrokeR(uo,0).addSegStrokeR(0,t.H3s).addSegStrokeR(-uo+t.W2,0).addPointR(-Po-t.W2,t.H3arc).addSegArc3(0,!1).addPointR(-bo-t.W2,-t.H3arc).addSegArc3(G,!0).addSegStrokeR(-uo+t.W2,0).closeSegStroke()),n},To=function(e,o){return D(e,o).addSegStrokeR(un,0).addSegStrokeR(0,t.H3-ke).addSegStrokeR(-mt,ke).addSegStrokeR(-un+mt,0).closeSegStroke()},Bo=function(e,o){const n=t.B4/Math.sin(h),c=t.B4/Math.cos(h),P=i+i/Math.tan(h)+Q/Math.sin(h),T=(t.JaSouth+t.W1a+Ut+Ae-z-P)*Math.cos(h),U=Q/Math.tan(h)+i/Math.sin(h),j=t.ReS-n+U+T-t.W8-t.S4e2/2,st=t.W8+t.S4e2,ht=go-n-j-st,m=_-Xt/2,St=ae*Math.tan(m),Ht=t.W4*Math.tan(m),tt=ht-St-Ht,kt=Math.sqrt(Ht**2+t.W4**2)/2,$n=Xt/2,vn=-Qe-dn,Ln=ae/Math.cos(h),je=go-rd-t.Q4Init-t.S4-(sn-1)*he,_e=D(e,o+c).addSegStrokeR(n,-c).addSegStrokeR(j,0).addSegStrokeR(0,t.P42).addSegStrokeR(st,0).addSegStrokeR(0,-t.P42).addSegStrokeR(tt,0).addSegStrokeRP($n,kt).addSegStrokeRP(G-h,td+Bt).addSegStrokeRP(_-h,vn-Ln).addSegStrokeR(-je+t.S4e/2,0);for(let Od=0;Od<sn-1;Od++)_e.addSegStrokeR(0,-t.P41).addSegStrokeR(-Wo,0).addSegStrokeR(0,t.P41).addSegStrokeR(-t.Q4+t.S4e,0);return _e.addSegStrokeR(0,-t.P41).addSegStrokeR(-Wo,0).addSegStrokeR(0,t.P41).addSegStrokeR(-t.Q4Init+t.S4e/2,0).closeSegStroke(),_e},yn=function(e,o){return Bo(e,o).rotate(e,o,h)},Jo=function(e,o){const n=t.B4/Math.sin(k),c=t.B4/Math.cos(k),P=i+i/Math.tan(k)+Q/Math.sin(k),T=(t.JaNorth+t.W1a+ao-Ae-z-P)*Math.cos(k),U=Q/Math.tan(k)+i/Math.sin(k),j=t.ReN-n+U+T-t.W8-t.S4e2/2,st=t.W8+t.S4e2,ht=Oe-n-j-st,m=_-Xt/2,St=ae*Math.tan(m),Ht=t.W4*Math.tan(m),tt=ht-St-Ht,kt=St+Ht,$n=-Qe-_o,vn=ae/Math.cos(k),Ln=Oe-gd-t.Q4Init-t.S4-(cn-1)*he,je=D(e+kt,o).addSegStrokeR(tt,0).addSegStrokeR(0,t.P42).addSegStrokeR(st,0).addSegStrokeR(0,-t.P42).addSegStrokeR(j,0).addSegStrokeR(n,c).addSegStrokeR(0,t.W4-c).addSegStrokeR(-t.Q4Init+t.S4e/2,0).addSegStrokeR(0,-t.P41).addSegStrokeR(-Wo,0).addSegStrokeR(0,t.P41);for(let _e=0;_e<cn-1;_e++)je.addSegStrokeR(-t.Q4+t.S4e,0).addSegStrokeR(0,-t.P41).addSegStrokeR(-Wo,0).addSegStrokeR(0,t.P41);return je.addSegStrokeR(-Ln+t.S4e/2,0).addSegStrokeRP(-_+k,$n-vn).addSegStrokeRP(G+k,Bt-td).closeSegStroke(),je},In=function(e,o){return Jo(e-Oe,o).rotate(e,o,-k)},Vo=function(e,o){const n=D(e,o).addSegStrokeR(kn,0).addSegStrokeR(0,t.P5).addSegStrokeR(Mo,0).addSegStrokeR(0,-t.P5).addSegStrokeR(Ve+nd,0).addSegStrokeR(nn,z).addSegStrokeR(-ed,z).addSegStrokeR(-cs-Ro,0).addSegStrokeR(0,-t.P5).addSegStrokeR(-an,0).addSegStrokeR(0,t.P5).addSegStrokeR(-ud,0).closeSegStroke(),c=D(e,o).addSegStrokeR(kn,0).addSegStrokeR(0,t.P5).addSegStrokeR(Mo,0).addSegStrokeR(0,-t.P5).addSegStrokeR(Ve+id,0).addSegStrokeR(dd,z).addSegStrokeR(Sd,0).addSegStrokeR(-sd,z).addSegStrokeR(-ls-Ro,0).addSegStrokeR(0,-t.P5).addSegStrokeR(-an,0).addSegStrokeR(0,t.P5).addSegStrokeR(-ud,0).closeSegStroke();return t.top_opt?c:n},Qn=function(e,o){return Vo(e-hn,o-t.W5a).rotate(e,o,_)},wo=function(e,o){const n=Math.max(id+Math.abs(Sd),nd+nn),c=n+ds-t.dtQ-t.dtY-No-Rs,P=n-c-Wn;return D(e,o+t.W5bs).addSegStrokeR(we,0).addSegStrokeR(0,-t.W5bs).addSegStrokeR(c,0).addSegStrokeR(0,t.dtP).addSegStrokeR(Wn,0).addSegStrokeR(0,-t.dtP).addSegStrokeR(P,0).addSegStrokeR(0,Ye).addSegStrokeR(-P,0).addSegStrokeR(0,-t.dtP).addSegStrokeR(-Wn,0).addSegStrokeR(0,t.dtP).addSegStrokeR(-c,0).addSegStrokeR(0,-t.W5bs).addSegStrokeR(-we,0).closeSegStroke()},An=function(e,o){return wo(e-we,o-Ye/2).rotate(e,o,_)},Yo=function(e,o){const n=D(e,o).addSegStrokeR(t.dtF-fd,0).addSegStrokeR(0,t.dtQ).addSegStrokeR(Rd,0);for(let c=0;c<t.Nb1-1;c++)n.addSegStrokeR(0,-t.dtQ).addSegStrokeR(fn,0).addSegStrokeR(0,t.dtQ).addSegStrokeR(_n,0).addSegStrokeR(0,-t.dtQ).addSegStrokeR(Ws,0).addSegStrokeR(0,t.dtQ).addSegStrokeR(_n,0).addSegStrokeR(0,-t.dtQ).addSegStrokeR(fn,0).addSegStrokeR(0,t.dtQ).addSegStrokeR(Rd,0);return n.addSegStrokeR(0,-t.dtQ).addSegStrokeR(t.dtF-fd,0).addSegStrokeR(0,_s).addSegStrokeR(-Ue,0).closeSegStroke(),n},Fo=function(e,o){const n=D(e,o).addSegStrokeR(t.W6,0).addSegStrokeR(0,t.dtQ-Qe-_o).addSegStrokeR(-Bt,_o).addSegStrokeR(-Bt,-dn).closeSegStroke(),c=f(e,o,t.W6,t.H6);return t.peak6?c:n},Uo=function(e,o){return D(e,o).addSegStrokeR(ln+Ss,0).addSegStrokeRP(_-h,t.P5).addSegStrokeRP(G-h,an).addSegStrokeRP(-_-h,t.P5).addSegStrokeRP(G-h,Ro).addSegStrokeR(-ln,0).closeSegStroke()},Tn=function(e,o,n){return Uo(e-ln,o-t.W8).rotate(e,o,n)},Xo=function(e,o){return D(e,o).addSegStrokeR(rn,0).addSegStrokeRP(k,Ve).addSegStrokeRP(k-_,t.P5).addSegStrokeRP(k,Mo).addSegStrokeRP(k+_,t.P5).addSegStrokeR(-rn-is,0).closeSegStroke()},Bn=function(e,o,n){return Xo(e-rn,o).rotate(e,o,G+n)},Ko=function(e,o,n){const c=Math.sqrt((t.dtY+No)**2+(t.dtX+_d)**2),P=Math.sqrt(t.dtX**2+t.dtY**2),F=n===1?0:t.dtW,T=t.dtP*Math.cos(p);return D(e,o+F+n*T).addSegStrokeRP(n*(-_+p),t.dtP).addSegStrokeR(c,0).addSegStrokeRP(n*p,t.dtQ).addSegStrokeRP(n*(_+p),Wd).addSegStrokeRP(n*(G+p),t.dtQ).addSegStrokeRP(n*(_+p),Pn).addSegStrokeR(-P,0).addSegStrokeRP(n*(G+p),xd).addSegStrokeRP(n*(_+p),t.dtP).closeSegStroke()},qo=function(e,o,n,c){const P=No*Math.cos(p)+t.dtP*Math.sin(p),F=_-c*n,T=c===1?t.dtW:0;return Ko(e-P,o-T,c).rotate(e,o,F)},Go=function(e,o,n){const c=n===1?0:t.daW,P=t.daE+t.H3/(2*Math.cos(rt)),F=t.daW/2*Math.tan(rt),T=Math.sqrt(t.daX**2+t.daY**2),U=P+F+T,j=t.daW/Math.tan(rt),st=U+j;return D(e,o+c).addSegStrokeR(U,0).addSegStrokeRP(n*rt,Ho).addSegStrokeRP(n*(rt-_),t.daP).addSegStrokeRP(n*rt,$d).addSegStrokeRP(n*(rt+_),t.daP).addSegStrokeR(-st,0).closeSegStroke()},zo=function(e,o,n,c){const P=-_-c*n;return Go(e-t.daE,o-t.daW/2,c).rotate(e,o,P)},jo=function(e,o,n){const c=n===1?0:t.dbW,P=t.dbE+t.H2/(2*Math.cos(gt)),F=t.dbW/2*Math.tan(gt),T=Math.sqrt(t.dbX**2+t.dbY**2),U=P+F+T,j=t.dbW/Math.tan(gt),st=U+j;return D(e,o+c).addSegStrokeR(U,0).addSegStrokeRP(n*gt,$o).addSegStrokeRP(n*(gt-_),t.dbP).addSegStrokeRP(n*gt,Cd).addSegStrokeRP(n*(gt+_),t.dbP).addSegStrokeR(-st,0).closeSegStroke()},Zo=function(e,o,n,c){const P=-_-c*n;return jo(e-t.dbE,o-t.dbW/2,c).rotate(e,o,P)};var Vt=Yt,w=Eo,Ct=Dn,nt=Oo,Re=En,ne=yo,Me=oo,wt=On,xe=Io,Rt=Qo,zt=Ao,Ne=To,de=Bo,jt=yn,Dt=Jo,r=In,b=Vo,W=Qn,a=wo,x=An,M=Yo,$=Fo,K=Uo,ct=Tn,Mt=Xo,At=Bn,Et=Ko,Zt=qo,He=Go,me=zo,to=jo,eo=Zo;const Bd=t.H2+t.H3,$e=t.W1a-2*t.V1,no=t.W1b-2*t.U1,ve=[];t.SecondPoleSouth===1&&ve.push(t.KaSouth),ve.push(t.La),t.SecondPoleNorth===1&&ve.push(t.KaNorth);const se=[0];let Jn=0;for(const e of ve)Jn+=e+t.W1a,se.push(Jn);const pt=se.length,so=pt*t.W1a+ve.reduce((e,o)=>e+o,0),po=t.Nb1*t.W1b+(t.Nb1-1)*t.Lb,co=po/1e3,lo=so/1e3,Vn=co-2*t.W1b/1e3,wn=lo-2*t.W1a/1e3,Yn=co,Fn=lo+(t.JaSouth+t.JaNorth)/1e3,lt=t.W1b+t.Lb,Ot=t.W1a/2,Ft=t.W1b/2,Le=t.H1+t.H2*(t.bSplit?2:1),Jd=Le+t.H3,xt=t.H2/2,ce=t.H1+xt,Ce=Le+t.H3/2,q=t.D2/2,I=t.D3/2,ut=t.H1+t.H2,le=so+t.JaSouth+t.JaNorth,X=t.W3-t.U1,yt=t.W2-t.V1,mo=t.W1b-t.U1,Se=t.W1a-t.V1,So=po+2*X,io=ut+t.H3,ie=2*(t.W3-t.U1),Un=2*(t.W2-t.V1),i=t.H3/2,Q=t.W4/2,ae=t.H7-t.P41,h=xs(t.Ra),G=Math.PI,_=G/2,Xn=so-2*t.W1a,Ut=Xn*t.Rt/100,ao=Xn-Ut,Vd=t.JaSouth-i+t.W1a,wd=t.JaNorth-i+t.W1a,It=Q-t.P41+t.H7,ro=Ut+Vd,De=ro/Math.cos(h)+It*Math.tan(h),go=De+t.ReS,Kn=De**2+It**2-ro**2,re=Math.sqrt(Kn),tn=ao+wd,qn=Kn+tn**2,Yd=Math.sqrt(qn),Ee=Math.sqrt(qn-It**2),Oe=Ee+t.ReN,Fd=Math.atan2(It,De),Ud=Math.atan2(ro,re),Xd=Math.atan2(tn,re),Kd=Math.atan2(It,Yd),Xt=Fd+Ud+Xd+Kd,k=G-h-Xt,Gn=Q*Math.cos(h-_),zn=Q*Math.sin(h-_),V=t.D4/2,en=i+V,qd=en/Math.tan(h),ge=Q-t.P41,Gd=ge*Math.cos(_+h)-t.ReS*Math.cos(h),zd=ge*Math.sin(_+h)-t.ReS*Math.sin(h),jd=t.ReS*Math.cos(h+G),Zd=t.ReS*Math.sin(h+G),jn=Q*Math.cos(-_-k),Zn=Q*Math.sin(-_-k),pn=en,pd=-pn/Math.tan(k),md=ge*Math.cos(_-k)+t.ReN*Math.cos(k),ts=ge*Math.sin(_-k)-t.ReN*Math.sin(k),es=t.ReN*Math.cos(-k),os=t.ReN*Math.sin(-k),on=t.W1a+Ut,Tt=t.bSplit===1?t.H2:0,mn=io+Tt-i+re,ye=-k-Xt/2,ho=(t.H7-t.P41)/Math.sin(Xt/2),Ie=t.W4/Math.sin(Xt/2),Qe=(ho+Ie/2)*Math.sin(ye),td=(ho+Ie/2)*Math.cos(ye),ns=(ho+Ie)*Math.sin(ye),Ae=(ho+Ie)*Math.cos(ye),ds=Math.abs(Ie/2*Math.sin(ye)),Te=t.SecondPoleSouth?t.KaSouth+t.W1a:0,ko=t.SecondPoleNorth?t.KaNorth+t.W1a:0,uo=t.W1a+2*(t.W2-t.V1),bo=Ut-Te-t.W2+t.V1,Po=ao-ko-t.W2+t.V1,z=t.W5a/2,ed=z*Math.tan(h),nn=z*Math.tan(k),od=mn+ns,fo=t.H3arc+(t.aSplit?t.H3s:0),ss=(t.H3+t.H3s)/2,Kt=io+Tt+fo,nd=od-nn-Kt,cs=od-ed-Kt,Nt=t.D5/2,dd=z*Math.tan(k),sd=z*Math.tan(h),cd=(Q+It)/Math.cos(k),ld=(Q+It)/Math.cos(h),Sd=cd-ld,id=re-i-fo-cd-dd,ls=re-i-fo-ld-sd,Be=t.top_opt?on-z:on+Ae-z,Bt=t.W6/2,dn=Bt*Math.tan(h),_o=Bt*Math.tan(k),ad=on-Bt,Je=mn+Qe,rd=Math.sqrt(dn**2+Bt**2)+ae*Math.tan(h),gd=Math.sqrt(_o**2+Bt**2)+ae*Math.tan(k),Wo=t.S4+t.S4e,he=t.S4+t.Q4,hd=t.S4+t.Q4Init,sn=Math.floor((go-hd-rd)/he)+1-t.dropLastS,cn=Math.floor((Oe-hd-gd)/he)+1-t.dropLastN,kd=fo+i,ln=(ro-kd/Math.tan(h)-z+(t.top_opt?0:Ae))*Math.sin(h)-Q+t.P42,Ss=t.W8/Math.tan(h),Sn=t.W8/Math.sin(h),Ro=t.P5/Math.tan(h),an=Sn-Ro,rn=(tn-kd/Math.tan(k)-z-(t.top_opt?0:Ae))*Math.sin(k)-Q+t.P42,is=t.W8/Math.tan(k),gn=t.W8/Math.sin(k),Ve=t.P5/Math.tan(k),Mo=gn-Ve,as=t.aSplit?t.H3s:t.H3,hn=Math.max(Math.max(gn,Sn)+t.G5Min,as),ud=hn-Sn,kn=hn-gn,we=kn+Mo+Ve,Ye=t.W1b+2*(t.W5bs-t.U1),bd=-t.JaSouth,Pd=t.JaSouth+2*t.W1a+t.KaSouth+t.W2-t.V1,rs=t.W1a+t.KaSouth-t.W2+t.V1,gs=2*(t.W1a+t.W2-t.V1)+t.La,hs=2*t.W1a+t.KaSouth+t.La-t.W2+t.V1,un=t.W2-t.V1+2*t.W1a+t.KaNorth+t.JaNorth,xo=1+t.d3Plank1SN,ks=xo===2||xo===3,us=ge/Math.cos(k),bs=(i-us)/Math.tan(k),mt=Math.max(i+bs,1),ke=Math.min(mt*Math.tan(k),2*i-1),Ps=ge/Math.cos(h),fs=(i-Ps)/Math.tan(h),te=Math.max(i+fs,1),bn=Math.min(te*Math.tan(h),2*i-1),Fe=t.dtQe,fd=Fe/2,Ue=po+2*(t.W5bs+t.dtF-t.U1),_s=t.dtQ-Qe,p=Math.atan2(t.dtX,t.dtY),Pn=t.dtQ*Math.tan(p),_d=t.dtW/Math.cos(p),Wd=_d-Pn,Rd=Ye+Fe,fn=t.dtX+Pn-Fe,_n=Wd+Fe,Ws=t.Lb+2*(t.U1-fn-_n-t.W5bs)-Fe,Md=t.dtPe,Rs=Md/2,xd=t.dtP/Math.tan(p),No=t.dtW/Math.sin(p),Wn=No-xd+Md,dt=t.daD/2,Nd=t.daPe,Hd=Nd/2,rt=Math.atan2(t.daX,t.daY),bt=t.daX+t.daW/(2*Math.cos(rt))+i*Math.tan(rt),Ho=t.daP/Math.tan(rt),$d=t.daW/Math.sin(rt)-Ho,Jt=t.dbD/2,vd=t.dbPe,Ld=vd/2,gt=Math.atan2(t.dbX,t.dbY),ue=t.dbX+t.dbW/(2*Math.cos(gt))+xt*Math.tan(gt),$o=t.dbP/Math.tan(gt),Cd=t.dbW/Math.sin(gt)-$o,Xe=t.W1b-2*t.U1,Ms=Xe+2*t.W5bs,Dd=t.W5a;if(t.aSplit===1&&t.SecondPoleNorth+t.SecondPoleSouth<2)throw`err296: aSplit ${t.aSplit} is active but inactive SecondPoleNorth ${t.SecondPoleNorth} or SecondPoleSouth ${t.SecondPoleSouth}`;if($e<1)throw`err096: W1a ${t.W1a} is too small compare to V1 ${t.V1} mm`;if(no<1)throw`err099: W1b ${t.W1b} is too small compare to U1 ${t.U1} mm`;if(t.JaSouth<Yt(h))throw`err191: JaSouth ${g(t.JaSouth)} must be bigger than JaMin ${g(Yt(h))} mm`;if(t.JaNorth<Yt(k))throw`err234: JaNorth ${g(t.JaNorth)} must be bigger than JaMin ${g(Yt(k))} mm`;if(t.P41>Q+V)throw`err287: P41 ${g(t.P41)} is too big compare to W4 ${g(t.W4)} and D4 ${g(t.D4)} mm`;if(t.P41>t.H7)throw`err291: P41 ${g(t.P41)} is too big compare to H7 ${g(t.H7)} mm`;if(t.Lb<Un)throw`err318: Lb ${g(t.Lb)} is too small compare to LbMin ${g(Un)} mm`;if(t.La<ie)throw`err322: La ${g(t.La)} is too small compare to LaMin ${g(ie)} mm`;if(t.KaNorth<ie)throw`err325: KaNorth ${g(t.KaNorth)} is too small compare to LaMin ${g(ie)} mm`;if(t.KaSouth<ie)throw`err328: KaSouth ${g(t.KaSouth)} is too small compare to LaMin ${g(ie)} mm`;S.logstr+=`Inner size X: ${g(Vn)} Y: ${g(wn)} m, S: ${g(Vn*wn)} m2
`,S.logstr+=`Wall size X: ${g(co)} Y: ${g(lo)} m, S: ${g(co*lo)} m2
`,S.logstr+=`Roof size X: ${g(Yn)} Y: ${g(Fn)} m, S: ${g(Yn*Fn)} m2
`,S.logstr+=`Pole Horizontal B (W-E): W: ${g(t.W2)} H: ${g(t.H2)} L: ${g(So)} mm x${pt*2}
`,S.logstr+=`Pole Horizontal A (N-S): W: ${g(t.W3)} H: ${g(t.H3)} L: ${g(le)} mm x${t.Nb1*2}
`,S.logstr+=`Pole Vertical: W1a: ${g(t.W1a)} W1b: ${g(t.W1b)} H: ${g(io)} mm x${pt*t.Nb1}
`,S.logstr+=`Top position: laSouth: ${g(Ut)} laNorth: ${g(ao)} Ytop ${g(re)} mm
`,S.logstr+=`Roof south: RdSouth1: ${g(De)} RdSouth: ${g(go)} mm
`,S.logstr+=`Roof north: RdNorth1: ${g(Ee)} RdNorth: ${g(Oe)} mm RaNorth ${g(Cn(k))} degree
`,S.logstr+=`Top angle: ${g(Cn(Xt))} degree
`;for(const e of se)for(let o=0;o<t.Nb1;o++)y.addMainO(f(o*lt,e,t.W1b,t.W1a)),y.addSecond(f(-X,e+t.V1-t.W2,So,t.W2)),y.addSecond(f(-X,e+Se,So,t.W2));for(let e=0;e<t.Nb1;e++)y.addSecond(f(e*lt-X,-t.JaSouth,t.W3,le)),y.addSecond(f(e*lt+mo,-t.JaSouth,t.W3,le));for(let e=0;e<t.Nb1;e++){const o=e*lt,n=t.bSplit===1?e%2:0,c=e===0?2:n,P=t.bSplit===1?1-e%2:0,F=e===t.Nb1-1?2:P,T=[En(o,0,c,F,1)];q>0&&(T.push(l(o+Ot,ce,q)),t.bSplit===1&&T.push(l(o+Ot,ce+t.H2,q))),N.addMainOI(T),N.addSecond(f(o-X,ut+Tt,t.W3,t.H3)),N.addSecond(f(o+mo,ut+Tt,t.W3,t.H3)),N.addSecond(An(o+Ft,Kt))}if(t.bSplit===1)for(let e=0;e<t.Nb1-1;e++){const o=e%2===0?t.H2:0;N.addSecond(oo(-X+e*lt,t.H1+o))}else N.addSecond(yo(-X,t.H1));N.addSecond(Yo(t.U1-t.W5bs-t.dtF,Je-t.dtQ));for(let e=0;e<t.Nb1-1;e++){const o=e*lt+Ft+Ye/2,n=Je-t.dtQ-t.dtY;N.addSecond(qo(o,n,p,1))}for(let e=1;e<t.Nb1;e++){const o=e*lt+Ft-Ye/2,n=Je-t.dtQ-t.dtY;N.addSecond(qo(o,n,p,-1))}for(let e=0;e<t.Nb1-1;e++){const o=e*lt+t.W1b+ue,n=e%2===0&&t.bSplit===1?t.H2:0,c=t.H1+xt+n;N.addSecond(Zo(o,c,gt,1)),N.addSecond(l(o,c,Jt))}for(let e=1;e<t.Nb1;e++){const o=e*lt-ue,n=e%2===1&&t.bSplit===1?t.H2:0,c=t.H1+xt+n;N.addSecond(Zo(o,c,gt,-1)),N.addSecond(l(o,c,Jt))}for(const[e,o]of se.entries()){let n=e+1===pt?4:1+e;pt===3&&t.SecondPoleNorth===1&&e===1&&(n=3);const c=[Dn(o,0,n)];I>0&&(c.push(l(o+Ot,Ce,I)),(e===1||e===2)&&t.aSplit===1&&c.push(l(o+Ot,Ce+ss,I))),u.addMainOI(c),u.addSecond(f(o-yt,t.H1,t.W2,t.H2)),u.addSecond(f(o+Se,t.H1,t.W2,t.H2)),t.bSplit===1&&(u.addSecond(f(o-yt,ut,t.W2,t.H2)),u.addSecond(f(o+Se,ut,t.W2,t.H2)))}t.aSplit===1?(u.addSecond(Qo(bd,ut+Tt)),u.addSecond(Ao(rs,io+Tt)),u.addSecond(To(hs,ut+Tt))):u.addSecond(Io(bd,ut+Tt));for(const[e,o]of se.entries()){const n=ut+Tt+i,c=t.aSplit===1?t.H3:0;if(e<pt-1){const P=e===1?n+c:n;u.addSecond(zo(o+t.W1a+bt,P,rt,1)),u.addSecond(l(o+t.W1a+bt,P,dt))}if(e>0){const P=e===2?n+c:n;u.addSecond(zo(o-bt,P,rt,-1)),u.addSecond(l(o-bt,P,dt))}}const Ke=-t.JaSouth+i,qe=Ce;u.addSecond(l(Ke,qe,V)),u.addSecond(l(Ke+qd,qe+en,V)),u.addSecond(f(0,0,De,Q+It).rotate(0,0,h).translate(Ke+Gn,qe+zn)),u.addSecond(yn(Ke+Gn+jd,qe+zn+Zd));const Ge=so+t.JaNorth-i,ze=Ce;u.addSecond(l(Ge,ze,V)),u.addSecond(l(Ge+pd,ze+pn,V)),u.addSecond(f(0,-Q-It,Ee,Q+It).rotate(0,0,G-k).translate(Ge+jn,ze+Zn)),u.addSecond(In(Ge+jn+es,ze+Zn+os)),u.addSecond(Qn(Be,Kt)),u.addSecond(l(Be+z,Kt-i,Nt)),u.addSecond(l(Be+z,Kt+Nt,Nt)),u.addSecond(Fo(ad,Je-t.dtQ)),u.addSecond(f(ad,Je-t.dtQ,t.W6,t.dtQ));for(let e=0;e<sn;e++){const o=t.Q4Init+e*he,n=Co(Ke+Gd,qe+zd).translatePolar(h,o),c=f(0,0,t.S4,t.H7).rotate(0,0,h);u.addSecond(c.translate(n.cx,n.cy))}for(let e=0;e<cn;e++){const o=G-k,n=t.Q4Init+e*he,c=Co(Ge+md,ze+ts).translatePolar(o,n),P=f(0,-t.H7,t.S4,t.H7).rotate(0,0,o);u.addSecond(P.translate(c.cx,c.cy))}u.addSecond(Tn(Be,Kt,h-_)),u.addSecond(Bn(Be+2*z,Kt,_-k));const Rn=[Eo(0,0,xo)];if(I>0&&(Rn.push(l(Le+t.H3/2,Ot,I)),t.aSplit===1&&ks&&Rn.push(l(Jd+t.H3s/2,Ot,I))),E.addMainOI(Rn),q>0){const e=ce+t.H2;E.addSecond(f(ce-q,-yt,2*q,$e+2*t.W2)),t.bSplit===1&&E.addSecond(f(e-q,-yt,2*q,$e+2*t.W2))}E.addSecond(f(t.H1,-yt,t.H2,t.W2)),E.addSecond(f(t.H1,Se,t.H2,t.W2)),t.bSplit===1&&(E.addSecond(f(ut,-yt,t.H2,t.W2)),E.addSecond(f(ut,Se,t.H2,t.W2)));const Mn=[Oo(0,0,t.d3Plank1West,t.d3Plank1East,xo)];q>0&&(Mn.push(l(ce,Ft,q)),t.bSplit===1&&Mn.push(l(ce+t.H2,Ft,q))),Pt.addMainOI(Mn),I>0&&Pt.addSecond(f(Ce-I,-X,2*I,no+2*t.W3)),Pt.addSecond(f(Le,-X,t.H3,t.W3)),Pt.addSecond(f(Le,mo,t.H3,t.W3));const vo=[yo(0,0)];if(q>0)for(let e=0;e<t.Nb1;e++){const o=Ft+X+e*lt;vo.push(l(o,xt,q))}if(Jt>0){for(let e=0;e<t.Nb1-1;e++){const o=e*lt+X+t.W1b+ue;vo.push(l(o,xt,Jt))}for(let e=1;e<t.Nb1;e++){const o=X+e*lt-ue;vo.push(l(o,xt,Jt))}}vt.addMainOI(vo),We.addMainO(oo(0,0));const Lo=[oo(0,0)];if(q>0)for(let e=0;e<2;e++){const o=Ft+X+e*lt;Lo.push(l(o,xt,q))}Jt>0&&(Lo.push(l(X+t.W1b+ue,xt,Jt)),Lo.push(l(X+lt-ue,xt,Jt))),We.addMainOI(Lo);const Ed=[On(0,0)];q>0&&Ed.push(l(Ft+X,xt,q)),Ze.addMainOI(Ed);const Qt=[Io(0,0)];if(I>0){let e=t.JaSouth+Ot;Qt.push(l(e,i,I)),e+=Te,Te>0&&Qt.push(l(e,i,I)),e+=t.La+t.W1a,Qt.push(l(e,i,I)),e+=ko,ko>0&&Qt.push(l(e,i,I))}if(V>0&&(Qt.push(l(i,i,V)),Qt.push(l(le-i,i,V))),Nt>0){const e=t.JaSouth+t.W1a+Ut;Qt.push(l(e,t.H3arc+i,Nt))}if(dt>0)for(const[e,o]of se.entries()){const n=t.JaSouth+o;e<pt-1&&Qt.push(l(n+t.W1a+bt,i,dt)),e>0&&Qt.push(l(n-bt,i,dt))}pe.addMainOI(Qt);const be=[Qo(0,0)];if(I>0){let e=t.JaSouth+Ot;be.push(l(e,i,I)),e+=t.KaSouth+t.W1a,be.push(l(e,i,I))}if(V>0&&be.push(l(i,i,V)),dt>0){const e=t.JaSouth+t.W1a;be.push(l(e+bt,i,dt)),be.push(l(e+t.KaSouth-bt,i,dt))}ft.addMainOI(be);const Pe=[Ao(0,0)];if(I>0){let e=Ot+yt;Pe.push(l(e,i,I)),e+=t.La+t.W1a,Pe.push(l(e,i,I))}if(Nt>0){const e=t.W2+Se+Ut-Te;Pe.push(l(e,t.H3arc+i,Nt))}if(dt>0){const e=yt+t.W1a;Pe.push(l(e+bt,i,dt)),Pe.push(l(e+t.La-bt,i,dt))}et.addMainOI(Pe);const fe=[To(0,0)];if(I>0){let e=Ot+yt;fe.push(l(e,i,I)),e+=t.KaNorth+t.W1a,fe.push(l(e,i,I))}if(V>0&&fe.push(l(un-i,i,V)),dt>0){const e=yt+t.W1a;fe.push(l(e+bt,i,dt)),fe.push(l(e+t.KaNorth-bt,i,dt))}B.addMainOI(fe);const xn=[Bo(0,0)];if(V>0){xn.push(l(t.ReS,Q,V));const e=(i+V)/Math.sin(h);xn.push(l(t.ReS+e,Q,V))}_t.addMainOI(xn);const Nn=[Jo(0,0)];if(V>0){Nn.push(l(Ee,Q,V));const e=(i+V)/Math.sin(k);Nn.push(l(Ee-e,Q,V))}Wt.addMainOI(Nn);const Hn=[Vo(0,0)];if(Nt>0){const e=we-(t.aSplit===1?t.H3s:t.H3)/2;Hn.push(l(e,t.W5a/2,Nt)),Hn.push(l(we+Nt,t.W5a/2,Nt))}Lt.addMainOI(Hn),J.addMainO(wo(0,0)),C.addMainO(Yo(0,0)),L.addMainO(Fo(0,0)),L.addSecond(f(0,0,t.W6,t.dtQ)),Z.addMainO(Uo(0,0)),ot.addMainO(Xo(0,0)),H.addMainO(Ko(0,0,1)),Gt.addMainOI([Go(0,0,1),l(t.daE,t.daW/2,dt)]),oe.addMainOI([jo(0,0,1),l(t.dbE,t.dbW/2,Jt)]),S.fig={faceEast:u,faceBase:y,faceSouth:N,facePlank1a:E,facePlank1b:Pt,facePlank2EE:vt,facePlank2Slot:We,facePlank2Short:Ze,facePlank3EE:pe,facePlank3S:ft,facePlank3M:et,facePlank3N:B,facePlank4S:_t,facePlank4N:Wt,facePlank5a:Lt,facePlank5b:J,facePlank6b:C,facePlank6c:L,facePlank7c:O,facePlank8S:Z,facePlank8N:ot,facePlankDiagTop:H,facePlankDiagA:Gt,facePlankDiagB:oe};const s=S.partName,Y=[];t.d3Plank1&&Y.push(`pax_${s}_pl1`),t.d3Plank2EE&&Y.push(`subpax_${s}_pl2ee`),t.d3Plank2Slot&&Y.push(`subpax_${s}_pl2slot`),t.d3Plank2short&&Y.push(`subpax_${s}_pl2short`),t.d3Plank3EE&&Y.push(`subpax_${s}_pl3ee`),t.d3Plank3S&&Y.push(`subpax_${s}_pl3s`),t.d3Plank3M&&Y.push(`subpax_${s}_pl3m`),t.d3Plank3N&&Y.push(`subpax_${s}_pl3n`),t.d3Plank4S&&Y.push(`subpax_${s}_pl4s`),t.d3Plank4N&&Y.push(`subpax_${s}_pl4n`),t.d3Plank5&&Y.push(`pax_${s}_pl5`),t.d3Plank6&&Y.push(`pax_${s}_pl6`),t.d3Plank7&&Y.push(`subpax_${s}_pl7`),t.d3Plank8S&&Y.push(`subpax_${s}_pl8s`),t.d3Plank8N&&Y.push(`subpax_${s}_pl8n`),t.d3PlankDiagTop&&Y.push(`subpax_${s}_pldt`),t.d3PlankDiagA&&Y.push(`subpax_${s}_plda`),t.d3PlankDiagB&&Y.push(`subpax_${s}_pldb`),t.d3Assembly&&Y.push(`pax_${s}_assembly`),S.vol={extrudes:[{outName:`subpax_${s}_pl1a`,face:`${s}_facePlank1a`,extrudeMethod:v.eLinearOrtho,length:t.W1b,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pl1b`,face:`${s}_facePlank1b`,extrudeMethod:v.eLinearOrtho,length:t.W1a,rotate:[_,0,0],translate:[0,t.W1a,0]},{outName:`subpax_${s}_pl2ee`,face:`${s}_facePlank2EE`,extrudeMethod:v.eLinearOrtho,length:t.W2,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pl2slot`,face:`${s}_facePlank2Slot`,extrudeMethod:v.eLinearOrtho,length:t.W2,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pl2short`,face:`${s}_facePlank2Short`,extrudeMethod:v.eLinearOrtho,length:t.W2,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pl3ee`,face:`${s}_facePlank3EE`,extrudeMethod:v.eLinearOrtho,length:t.W3,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pl3s`,face:`${s}_facePlank3S`,extrudeMethod:v.eLinearOrtho,length:t.W3,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pl3m`,face:`${s}_facePlank3M`,extrudeMethod:v.eLinearOrtho,length:t.W3,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pl3n`,face:`${s}_facePlank3N`,extrudeMethod:v.eLinearOrtho,length:t.W3,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pl4s`,face:`${s}_facePlank4S`,extrudeMethod:v.eLinearOrtho,length:Xe,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pl4n`,face:`${s}_facePlank4N`,extrudeMethod:v.eLinearOrtho,length:Xe,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pl5a`,face:`${s}_facePlank5a`,extrudeMethod:v.eLinearOrtho,length:Ms,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pl5b`,face:`${s}_facePlank5b`,extrudeMethod:v.eLinearOrtho,length:Dd,rotate:[_,0,0],translate:[0,Dd,0]},{outName:`subpax_${s}_pl6b`,face:`${s}_facePlank6b`,extrudeMethod:v.eLinearOrtho,length:t.W6,rotate:[_,0,0],translate:[0,t.W6,0]},{outName:`subpax_${s}_pl6c`,face:`${s}_facePlank6c`,extrudeMethod:v.eLinearOrtho,length:Ue,rotate:[_,0,-_],translate:[Ue,t.W6,0]},{outName:`subpax_${s}_pl7`,face:`${s}_facePlank7c`,extrudeMethod:v.eLinearOrtho,length:Ue,rotate:[_,0,0],translate:[0,Ue,0]},{outName:`subpax_${s}_pl8s`,face:`${s}_facePlank8S`,extrudeMethod:v.eLinearOrtho,length:Xe,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pl8n`,face:`${s}_facePlank8N`,extrudeMethod:v.eLinearOrtho,length:Xe,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pldt`,face:`${s}_facePlankDiagTop`,extrudeMethod:v.eLinearOrtho,length:t.W6,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_plda`,face:`${s}_facePlankDiagA`,extrudeMethod:v.eLinearOrtho,length:no,rotate:[0,0,0],translate:[0,0,0]},{outName:`subpax_${s}_pldb`,face:`${s}_facePlankDiagB`,extrudeMethod:v.eLinearOrtho,length:$e,rotate:[0,0,0],translate:[0,0,0]}],volumes:[{outName:`pax_${s}_pl1`,boolMethod:qt.eIntersection,inList:[`subpax_${s}_pl1a`,`subpax_${s}_pl1b`]},{outName:`pax_${s}_pl5`,boolMethod:qt.eIntersection,inList:[`subpax_${s}_pl5a`,`subpax_${s}_pl5b`]},{outName:`pax_${s}_pl6`,boolMethod:qt.eIntersection,inList:[`subpax_${s}_pl6b`,`subpax_${s}_pl6c`]},{outName:`pax_${s}_assembly`,boolMethod:qt.eUnion,inList:[`pax_${s}_pl1`,`pax_${s}_pl6`]},{outName:`pax_${s}`,boolMethod:qt.eUnion,inList:Y}]},S.sub={},S.logstr+=`abri drawn successfully!
`,S.calcErr=!1}catch(Yt){S.logstr+=Yt,console.log(Yt)}return S}var Cs={pTitle:"abri",pDescription:"A shelter made out of wood beam for supporting photovoltaic panels",pDef:Qd,pGeom:Ls},Ad={partName:"stairs",params:[d("Nn","stair",25,1,200,1),d("Nd","stair",20,2,200,1),d("D1","mm",5e3,1e3,5e4,1),d("Wi1","mm",1e3,1,1e4,1),d("We1","mm",1e3,1,1e4,1),d("Wi2","mm",2e3,1,1e4,1),d("We2","mm",2e3,1,1e4,1),$t("Details"),ee("spiral",["ExtInt","Exterior","Interior"]),ee("border",["arc","straight"]),d("H1","mm",200,10,2e3,1),d("Wc","mm",200,10,2e3,1),d("Nc","column",6,0,100,1)],paramSvg:{Nn:"stairs_top.svg",Nd:"stairs_top.svg",D1:"stairs_top.svg",Wi1:"stairs_top.svg",We1:"stairs_top.svg",Wi2:"stairs_top.svg",We2:"stairs_top.svg",spiral:"stairs_top.svg",border:"stairs_top.svg",H1:"stairs_height.svg",Wc:"stairs_top.svg",Nc:"stairs_height.svg"},sim:{tMax:180,tStep:.5,tUpdate:500}};function Ds(it,t,at=""){const S=Do(Ad.partName+at),y=R(),N=R(),u=R(),E=R();S.logstr+=`${S.partName} simTime: ${it}
`;try{let ft=function(r,b,W){const a=b*2*Z,x=W<0?Lt:0,M=a+oe+x;return[Co(r,0).rotate(Gt,M),a]},et=function(r,b,W){const[a]=ft(b,0,W),x=D(a.cx,a.cy);for(let M=1;M<r;M++){const[$]=ft(b,M,W);x.addSegStrokeA($.cx,$.cy)}return x.closeSegStroke(),x},B=function(r,b,W,a,x,M){const[$,K]=ft(W,x,M),ct=r+M*(x*b-a),Mt=$.translatePolar(K,ct),At=$.translatePolar(K+Z,ct),Et=$.translatePolar(K+2*Z,ct);return[Mt,At,Et]},_t=function(r,b,W,a,x,M){const $=D(a.cx,a.cy);return t.border===0?$.addPointA(x.cx,x.cy).addPointA(M.cx,M.cy).addSegArc2():$.addSegStrokeA(M.cx,M.cy),$.addSegStrokeA(W.cx,W.cy),t.border===0?$.addPointA(b.cx,b.cy).addPointA(r.cx,r.cy).addSegArc2():$.addSegStrokeA(r.cx,r.cy),$.closeSegStroke(),$},Wt=function(r,b,W){const a=Math.atan2(b.cy-r.cy,b.cx-r.cx),x=r.translatePolar(a,W),M=b.translatePolar(a+Lt,W);return[x,M]};var Pt=ft,vt=et,We=B,Ze=_t,pe=Wt;const Lt=Math.PI,J=Lt/2,C=t.D1/2,L=(t.Wi2-t.Wi1)/t.Nn,O=(t.We2-t.We1)/t.Nn,Z=Lt/t.Nd,ot=L/(2*Math.sin(Z)),H=O/(2*Math.sin(Z)),Gt=Co(0,0),oe=J+Z,Vt=t.Nc>0?Math.floor(t.Nn/t.Nc):0,w=t.Nc>0?t.Nc:1;if(t.Wi2<t.Wi1)throw`err092: Wi2 ${t.Wi2} is too small compare to Wi1 ${t.Wi1}`;if(t.We2<t.We1)throw`err095: We2 ${t.We2} is too small compare to We1 ${t.We1}`;if(C<t.Wi2)throw`err098: D1 ${t.D1} is too small compare to Wi2 ${t.Wi2}`;if(t.Wi1<t.Wc)throw`err110: Wi1 ${t.Wi1} is too small compare to Wc ${t.Wc}`;if(t.We1<t.Wc)throw`err113: We1 ${t.We1} is too small compare to Wc ${t.Wc}`;S.logstr+=`Stair angle ${g(Cn(2*Z))} degree
`,S.logstr+=`Stairs angle ${g(t.Nn/t.Nd)} turn with ${Vt} columns
`;const Ct=l(0,0,C),nt=et(t.Nd,ot,-1),Re=et(t.Nd,H,1);y.addSecond(Ct),y.addSecond(nt),y.addSecond(Re);const ne=[];for(let r=0;r<t.Nn;r++){const b=r*(O+L)+t.We1+t.Wi1;let[W,a,x]=B(C-t.Wi1,L,ot,0,r,-1),[M,$,K]=B(C+t.We1,O,H,0,r,1);t.spiral===1&&([W,a,x]=B(C+t.We1,O,H,b,r,1)),t.spiral===2&&([M,$,K]=B(C-t.Wi1,L,ot,b,r,-1));const ct=_t(W,a,x,M,$,K);ne.push(ct),y.addMainO(ct)}N.mergeFigure(y,!0);const Me=[],wt=[];for(let r=0;r<Vt;r++){const b=(r+1)*t.Nc-1,W=b*(O+L)+t.We1+t.Wi1;let[a,x,M]=B(C-t.Wi1,L,ot,0,b,-1),[$,K,ct]=B(C+t.We1,O,H,0,b,1),[Mt,At]=Wt(a,$,t.Wc),[Et,Zt]=Wt(x,K,t.Wc),[He,me]=Wt(M,ct,t.Wc);t.spiral===1&&([At,Zt,me]=B(C+t.We1,O,H,t.Wc,b,1),[a,x,M]=B(C+t.We1,O,H,W,b,1),[Mt,Et,He]=B(C+t.We1,O,H,W-t.Wc,b,1)),t.spiral===2&&([Mt,Et,He]=B(C-t.Wi1,L,ot,t.Wc,b,-1),[$,K,ct]=B(C-t.Wi1,L,ot,W,b,-1),[At,Zt,me]=B(C-t.Wi1,L,ot,W-t.Wc,b,-1));const to=_t(a,x,M,Mt,Et,He),eo=_t($,K,ct,At,Zt,me);Me.push(to),wt.push(eo),N.addMainO(to),N.addMainO(eo),y.addSecond(to),y.addSecond(eo)}const xe=[];let Rt=0;for(let r=0;r<t.Nn;r++){const b=(C-t.Wi1-r*L)*2*Z,W=r*t.H1;u.addMainO(f(Rt,W,b,t.H1)),(r+1)%w===0&&W>0&&(u.addMainO(f(Rt,0,b,W)),xe.push(W)),Rt+=b}E.mergeFigure(u,!0),Rt=0;for(let r=0;r<t.Nn;r++){const b=(C+t.We1-r*O)*2*Z,W=r*t.H1;E.addMainO(f(Rt,W,b,t.H1)),(r+1)%w===0&&W>0&&E.addMainO(f(Rt,0,b,W)),Rt+=b}const zt={},Ne={},de=[],jt=[],Dt=S.partName;for(const[r,b]of ne.entries()){const W=R();W.addMainO(b);const a=`Stair${r.toString().padStart(4,"0")}`,x=`face${a}`;zt[x]=W,de.push({outName:`subpax_${Dt}_${a}`,face:`${Dt}_${x}`,extrudeMethod:v.eLinearOrtho,length:t.H1,rotate:[0,0,0],translate:[0,0,r*t.H1]}),jt.push(`subpax_${Dt}_${a}`)}for(const[r,b]of Me.entries()){const W=R();W.addMainO(b),W.addMainO(wt[r]);const a=`Col${r.toString().padStart(4,"0")}`,x=`face${a}`;zt[x]=W,de.push({outName:`subpax_${Dt}_${a}`,face:`${Dt}_${x}`,extrudeMethod:v.eLinearOrtho,length:xe[r],rotate:[0,0,0],translate:[0,0,0]}),jt.push(`subpax_${Dt}_${a}`)}S.fig={faceTop:y,faceTopColumn:N,faceBorderI:u,faceBorderE:E,...zt,...Ne},S.vol={extrudes:de,volumes:[{outName:`pax_${Dt}`,boolMethod:qt.eUnion,inList:jt}]},S.sub={},S.logstr+=`stairs drawn successfully!
`,S.calcErr=!1}catch(ft){S.logstr+=ft,console.log(ft)}return S}var Es={pTitle:"stairs",pDescription:"an helicoidal stairs",pDef:Ad,pGeom:Ds};const Td={"desi76/catamaran":Hs,"desi76/stairs":Es,"desi76/abri":Cs,"desi76/voila":vs};function Os(it){const t=/^.*\//g;return it.replace(t,"")}function ys(it){const t={};for(const at of Object.keys(it)){const S=Os(at);t[S]=`/${at}`}return t}function Is(it){const t=[];for(const at of Object.keys(it))t.push(at);return t}const Fs=ys(Td),Us=Is(Td);export{Td as a,Fs as b,Us as d};
